<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Steganography — Digital Forensics Workshop</title>
<!-- Khana{check_the_source_code_you_forensic_genius} -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/TextPlugin.min.js"></script>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#0B1120;--bg2:#131B2E;--accent:#4AEDC4;--accent-glow:rgba(74,237,196,0.3);
  --accent2:#3B82F6;--text:#FFFFFF;--text2:#8892A8;--code-bg:#0A0E1A;
  --card-bg:rgba(19,27,46,0.85);--card-border:rgba(74,237,196,0.15);
  --font-heading:'Space Grotesk',sans-serif;--font-body:'Inter',sans-serif;
  --font-mono:'JetBrains Mono',monospace;
}
html,body{width:100%;height:100%;overflow:hidden;background:var(--bg);color:var(--text);font-family:var(--font-body);font-size:16px;line-height:1.6}
body{position:relative}

/* ─── SLIDE SYSTEM ─── */
.slide{position:absolute;inset:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;padding:40px 80px;z-index:1;overflow:hidden}
.slide.active{opacity:1;pointer-events:auto;z-index:2}
.slide-inner{max-width:1200px;width:100%;position:relative}

/* ─── PROGRESS BAR ─── */
.progress-bar{position:fixed;top:0;left:0;height:3px;background:var(--accent);z-index:100;transition:width 0.4s ease;box-shadow:0 0 10px var(--accent-glow)}

/* ─── DOT NAV ─── */
.dot-nav{position:fixed;right:30px;top:50%;transform:translateY(-50%);z-index:100;display:flex;flex-direction:column;gap:10px}
.dot-nav .dot{width:10px;height:10px;border-radius:50%;border:2px solid var(--text2);background:transparent;cursor:pointer;transition:all 0.3s ease;position:relative}
.dot-nav .dot:hover{border-color:var(--accent);transform:scale(1.3)}
.dot-nav .dot.active{background:var(--accent);border-color:var(--accent);box-shadow:0 0 8px var(--accent-glow)}
.dot-nav .dot .dot-label{position:absolute;right:20px;top:50%;transform:translateY(-50%);white-space:nowrap;font-size:11px;color:var(--text2);opacity:0;transition:opacity 0.3s;pointer-events:none;font-family:var(--font-mono)}
.dot-nav .dot:hover .dot-label{opacity:1}

/* ─── SLIDE COUNTER ─── */
.slide-counter{position:fixed;bottom:30px;right:30px;z-index:100;font-family:var(--font-mono);font-size:14px;color:var(--text2)}
.slide-counter .current{color:var(--accent);font-weight:700}

/* ─── NAV HINT ─── */
.nav-hint{position:fixed;bottom:30px;left:50%;transform:translateX(-50%);z-index:100;font-size:12px;color:var(--text2);font-family:var(--font-mono);opacity:0.5;display:flex;align-items:center;gap:8px}
.nav-hint kbd{background:var(--bg2);border:1px solid var(--card-border);border-radius:4px;padding:2px 8px;font-size:11px}

/* ─── TYPOGRAPHY ─── */
h1{font-family:var(--font-heading);font-size:clamp(2.5rem,5vw,4.5rem);font-weight:800;line-height:1.1;letter-spacing:-0.02em}
h2{font-family:var(--font-heading);font-size:clamp(1.8rem,3vw,2.8rem);font-weight:700;line-height:1.2;margin-bottom:24px}
h3{font-family:var(--font-heading);font-size:1.3rem;font-weight:600;margin-bottom:12px}
p{color:var(--text2);font-size:1rem;max-width:700px}
.accent{color:var(--accent)}
.highlight{color:var(--accent);font-weight:600}
.subtitle{font-size:clamp(1rem,2vw,1.4rem);color:var(--text2);margin-top:12px}
.tagline{font-family:var(--font-mono);font-size:0.9rem;color:var(--accent);margin-top:16px;opacity:0.8}

/* ─── TERMINAL ─── */
.terminal{background:var(--code-bg);border-radius:12px;overflow:hidden;border:1px solid var(--card-border);width:100%;max-width:700px;font-family:var(--font-mono);box-shadow:0 8px 32px rgba(0,0,0,0.4)}
.terminal-header{background:#1a1a2e;padding:10px 16px;display:flex;align-items:center;gap:8px}
.terminal-dot{width:12px;height:12px;border-radius:50%}
.terminal-dot.r{background:#ff5f57}.terminal-dot.y{background:#ffbd2e}.terminal-dot.g{background:#28c840}
.terminal-title{margin-left:8px;font-size:12px;color:var(--text2)}
.terminal-body{padding:20px;font-size:0.85rem;line-height:1.8;min-height:60px}
.terminal-line{white-space:pre-wrap;word-break:break-all}
.terminal-line .prompt{color:var(--accent);user-select:none}
.terminal-line .cmd{color:#e2e8f0}
.terminal-line .output{color:var(--text2)}
.terminal-line .flag{color:var(--accent);font-weight:700;text-shadow:0 0 8px var(--accent-glow)}
.terminal-line .hl{color:var(--accent)}
.cursor{display:inline-block;width:8px;height:1.1em;background:var(--accent);vertical-align:text-bottom;animation:blink 1s step-end infinite;margin-left:1px}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}
.terminal.small{max-width:500px}
.terminals-row{display:flex;gap:24px;width:100%}
.terminals-row .terminal{flex:1;max-width:none}

/* ─── CARDS ─── */
.card{background:var(--card-bg);border:1px solid var(--card-border);border-radius:12px;padding:28px;transition:all 0.3s ease;position:relative;overflow:hidden}
.card:hover{border-color:var(--accent);transform:translateY(-4px);box-shadow:0 8px 30px rgba(74,237,196,0.1)}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--accent),transparent);opacity:0;transition:opacity 0.3s}
.card:hover::before{opacity:1}
.card-icon{font-size:2rem;margin-bottom:16px}
.card h3{color:var(--text);font-size:1.1rem}
.card p{font-size:0.9rem;color:var(--text2)}
.cards-row{display:flex;gap:20px;width:100%}
.cards-row .card{flex:1}

/* ─── PRO TIP ─── */
.pro-tip{background:rgba(74,237,196,0.05);border-left:3px solid var(--accent);border-radius:0 8px 8px 0;padding:16px 20px;margin-top:20px;display:flex;align-items:flex-start;gap:12px}
.pro-tip-icon{font-size:1.2rem;flex-shrink:0}
.pro-tip-text{font-size:0.9rem;color:var(--text2)}
.pro-tip-text strong{color:var(--accent)}

/* ─── TABLE ─── */
.magic-table{width:100%;border-collapse:collapse;font-family:var(--font-mono);font-size:0.85rem;max-width:600px}
.magic-table th{text-align:left;color:var(--accent);padding:10px 16px;border-bottom:2px solid var(--card-border);font-weight:600}
.magic-table td{padding:10px 16px;border-bottom:1px solid rgba(255,255,255,0.05);color:var(--text2)}
.magic-table tr:nth-child(even) td{background:rgba(255,255,255,0.02)}
.magic-table .hex{color:var(--accent);font-weight:500}

/* ─── SPLIT LAYOUT ─── */
.split{display:flex;gap:40px;align-items:flex-start;width:100%}
.split-left,.split-right{flex:1}

/* ─── KEY TAKEAWAY ─── */
.takeaway{background:linear-gradient(135deg,rgba(74,237,196,0.1),rgba(59,130,246,0.1));border:1px solid var(--accent);border-radius:12px;padding:20px 24px;margin-top:24px;text-align:center}
.takeaway p{color:var(--text);font-weight:600;max-width:none;font-size:1rem}

/* ─── LSB SECTION ─── */
.pixel-grid{display:grid;grid-template-columns:repeat(8,40px);gap:2px;margin:20px auto}
.pixel-cell{width:40px;height:40px;border-radius:4px;transition:all 0.3s}
.binary-display{font-family:var(--font-mono);font-size:1.1rem;text-align:center;margin:20px 0}
.binary-display .bit{display:inline-block;padding:4px 6px;margin:0 1px;border-radius:3px}
.binary-display .bit.lsb{background:var(--accent);color:var(--bg);font-weight:700}
.color-compare{display:flex;gap:8px;align-items:center;justify-content:center;margin:16px 0}
.color-swatch{width:80px;height:80px;border-radius:8px;border:2px solid var(--card-border)}
.color-label{font-family:var(--font-mono);font-size:0.75rem;color:var(--text2);text-align:center;margin-top:4px}
.landscape-compare{display:flex;gap:24px;justify-content:center;align-items:center;margin-top:30px}
.landscape-frame{text-align:center}
.landscape-frame svg{border-radius:8px;border:1px solid var(--card-border)}
.landscape-frame p{font-size:0.85rem;margin-top:8px;color:var(--text2)}
.substep-indicator{font-family:var(--font-mono);font-size:0.8rem;color:var(--text2);text-align:center;margin-top:20px}
.lsb-content{display:none}
.lsb-content.active{display:block}
.ext-content{display:none}
.ext-content.active{display:block}

/* ─── PIPELINE ─── */
.pipeline{display:flex;align-items:center;gap:0;justify-content:center;flex-wrap:wrap;margin:30px 0}
.pipeline-node{background:var(--card-bg);border:2px solid var(--card-border);border-radius:10px;padding:12px 18px;font-family:var(--font-mono);font-size:0.85rem;color:var(--text2);transition:all 0.4s;white-space:nowrap}
.pipeline-node.lit{border-color:var(--accent);color:var(--accent);box-shadow:0 0 15px var(--accent-glow)}
.pipeline-arrow{color:var(--text2);font-size:1.2rem;padding:0 6px;opacity:0.3;transition:all 0.4s}
.pipeline-arrow.lit{color:var(--accent);opacity:1}

/* ─── HIDING SPOTS ─── */
.spots-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px;max-width:700px;margin:0 auto}
.spot-card{display:flex;align-items:flex-start;gap:16px;background:var(--card-bg);border:1px solid var(--card-border);border-radius:10px;padding:20px}
.spot-icon{font-size:1.8rem;flex-shrink:0}
.spot-card h4{color:var(--text);font-size:0.95rem;margin-bottom:4px}
.spot-card p{font-size:0.8rem;color:var(--text2)}
.spot-tool{font-family:var(--font-mono);color:var(--accent);font-size:0.8rem;margin-top:6px}

/* ─── ENCODING CARDS ─── */
.encoding-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:20px}
.encoding-item{background:var(--card-bg);border:1px solid var(--card-border);border-radius:8px;padding:16px}
.encoding-item h4{color:var(--accent);font-family:var(--font-mono);font-size:0.9rem;margin-bottom:8px}
.encoding-item code{font-family:var(--font-mono);font-size:0.8rem;color:var(--text2);background:var(--code-bg);padding:2px 6px;border-radius:3px}

/* ─── CTA ─── */
.cta-btn{display:inline-block;background:var(--accent);color:var(--bg);font-family:var(--font-heading);font-weight:700;font-size:1.1rem;padding:16px 40px;border-radius:50px;text-decoration:none;transition:all 0.3s;border:none;cursor:pointer}
.cta-btn:hover{transform:scale(1.05);box-shadow:0 0 30px var(--accent-glow)}
.tools-recap{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin:24px 0}
.tools-recap span{background:var(--card-bg);border:1px solid var(--card-border);border-radius:6px;padding:6px 14px;font-family:var(--font-mono);font-size:0.8rem;color:var(--text2)}

/* ─── BACKGROUND ─── */
.bg-grid{position:fixed;inset:0;z-index:0;pointer-events:none;opacity:0.03;background-image:linear-gradient(var(--accent) 1px,transparent 1px),linear-gradient(90deg,var(--accent) 1px,transparent 1px);background-size:60px 60px}
.bg-particles{position:fixed;inset:0;z-index:0;pointer-events:none;overflow:hidden}
.bg-particle{position:absolute;font-family:var(--font-mono);font-size:10px;color:var(--accent);opacity:0.06;animation:float-up linear infinite}
@keyframes float-up{0%{transform:translateY(100vh) rotate(0deg);opacity:0.06}100%{transform:translateY(-20px) rotate(180deg);opacity:0}}

/* ─── ANIMATIONS ─── */
/* Initial hidden states are set via JS, not CSS, to avoid conflicts with GSAP inline styles */

/* ─── FILE ANATOMY SVG ─── */
.file-anatomy-svg{max-width:500px;margin:0 auto}
.file-anatomy-svg .band{opacity:0;transform:translateX(-20px)}
.file-anatomy-svg .hex-byte{opacity:0}
.file-anatomy-svg .meta-row{opacity:0}
.file-anatomy-svg .glow-field{animation:none}
@keyframes cyan-pulse{0%,100%{fill:rgba(74,237,196,0.1);stroke:var(--accent)}50%{fill:rgba(74,237,196,0.25);stroke:#7ff5d8}}

/* ─── SPECTROGRAM ─── */
.spectro-wave{stroke-dasharray:1000;stroke-dashoffset:1000}

/* ─── RESPONSIVE ─── */
@media(max-width:1024px){
  .slide{padding:40px}
  .cards-row,.split,.terminals-row{flex-direction:column}
  .spots-grid,.encoding-grid{grid-template-columns:1fr}
  .pipeline{flex-wrap:wrap;gap:8px}
}
@media(max-width:768px){
  .slide{padding:24px}
  .dot-nav{right:12px;gap:6px}
  .dot-nav .dot{width:8px;height:8px}
  h1{font-size:2rem}
  .pixel-grid{grid-template-columns:repeat(8,30px)}
  .pixel-cell{width:30px;height:30px}
}
</style>
</head>
<body>

<!-- Background -->
<div class="bg-grid"></div>
<div class="bg-particles" id="particles"></div>

<!-- Progress bar -->
<div class="progress-bar" id="progressBar" style="width:0%"></div>

<!-- Dot navigation -->
<nav class="dot-nav" id="dotNav"></nav>

<!-- Slide counter -->
<div class="slide-counter"><span class="current" id="counterCurrent">1</span> / <span id="counterTotal">18</span></div>

<!-- Navigation hint -->
<div class="nav-hint"><kbd>←</kbd><kbd>→</kbd> navigate <kbd>Space</kbd> next</div>

<!-- ═══════════════════════════════════════ -->
<!-- SLIDE 0: HERO -->
<!-- ═══════════════════════════════════════ -->
<section class="slide active" id="slide-0">
<div class="slide-inner" style="text-align:center">
  <!-- Hero SVG: Eye with Lock — large, dramatic -->
  <div data-anim="scale" style="margin-bottom:20px">
    <svg width="280" height="180" viewBox="0 0 280 180" fill="none" xmlns="http://www.w3.org/2000/svg">
      <!-- Outer glow ring -->
      <ellipse class="hero-glow" cx="140" cy="90" rx="120" ry="70" stroke="#4AEDC4" stroke-width="0.5" fill="none" opacity="0" stroke-dasharray="600" stroke-dashoffset="600"/>
      <!-- Eye outline — drawn first -->
      <path class="hero-eye-path" d="M15,90 Q140,10 265,90 Q140,170 15,90 Z" stroke="#4AEDC4" stroke-width="3" fill="none" stroke-dasharray="700" stroke-dashoffset="700"/>
      <!-- Eye fill (subtle) -->
      <path class="hero-eye-fill" d="M15,90 Q140,10 265,90 Q140,170 15,90 Z" fill="rgba(74,237,196,0.03)" opacity="0"/>
      <!-- Iris circle -->
      <circle class="hero-iris" cx="140" cy="90" r="40" stroke="#4AEDC4" stroke-width="2" fill="rgba(74,237,196,0.06)" stroke-dasharray="260" stroke-dashoffset="260"/>
      <!-- Pupil -->
      <circle class="hero-pupil" cx="140" cy="90" r="18" fill="rgba(74,237,196,0.12)" stroke="#4AEDC4" stroke-width="1.5" stroke-dasharray="120" stroke-dashoffset="120"/>
      <!-- Lock body inside pupil -->
      <rect class="hero-lock" x="130" y="83" width="20" height="16" rx="2.5" stroke="#4AEDC4" stroke-width="1.5" fill="rgba(74,237,196,0.1)" stroke-dasharray="80" stroke-dashoffset="80"/>
      <!-- Lock shackle -->
      <path class="hero-lock" d="M134,83 V78 A6,6 0 0 1 146,78 V83" stroke="#4AEDC4" stroke-width="1.5" fill="none" stroke-dasharray="40" stroke-dashoffset="40"/>
      <!-- Keyhole -->
      <circle class="hero-keyhole" cx="140" cy="89" r="2.5" fill="#4AEDC4" opacity="0"/>
      <rect class="hero-keyhole" x="139" y="89" width="2" height="5" rx="1" fill="#4AEDC4" opacity="0"/>
      <!-- Decorative rays -->
      <line class="hero-ray" x1="140" y1="5" x2="140" y2="18" stroke="#4AEDC4" stroke-width="1" opacity="0"/>
      <line class="hero-ray" x1="140" y1="162" x2="140" y2="175" stroke="#4AEDC4" stroke-width="1" opacity="0"/>
      <line class="hero-ray" x1="5" y1="90" x2="18" y2="90" stroke="#4AEDC4" stroke-width="1" opacity="0"/>
      <line class="hero-ray" x1="262" y1="90" x2="275" y2="90" stroke="#4AEDC4" stroke-width="1" opacity="0"/>
      <line class="hero-ray" x1="40" y1="30" x2="50" y2="40" stroke="#4AEDC4" stroke-width="0.8" opacity="0"/>
      <line class="hero-ray" x1="240" y1="30" x2="230" y2="40" stroke="#4AEDC4" stroke-width="0.8" opacity="0"/>
      <line class="hero-ray" x1="40" y1="150" x2="50" y2="140" stroke="#4AEDC4" stroke-width="0.8" opacity="0"/>
      <line class="hero-ray" x1="240" y1="150" x2="230" y2="140" stroke="#4AEDC4" stroke-width="0.8" opacity="0"/>
      <!-- Binary orbiting text -->
      <text class="hero-binary" x="30" y="30" fill="#4AEDC4" font-family="JetBrains Mono" font-size="8" opacity="0">01101000</text>
      <text class="hero-binary" x="200" y="165" fill="#4AEDC4" font-family="JetBrains Mono" font-size="8" opacity="0">01101001</text>
      <text class="hero-binary" x="220" y="25" fill="#4AEDC4" font-family="JetBrains Mono" font-size="7" opacity="0">01100100</text>
      <text class="hero-binary" x="15" y="155" fill="#4AEDC4" font-family="JetBrains Mono" font-size="7" opacity="0">01100101</text>
    </svg>
  </div>
  <h1 data-anim="up"><span class="accent" id="heroTitle"></span></h1>
  <p class="subtitle" data-anim="up" style="margin-bottom:6px">Digital Forensics Workshop</p>
  <h2 data-anim="up" style="font-family:var(--font-heading);font-size:clamp(1.6rem,3vw,2.4rem);font-weight:700;color:var(--text);margin-bottom:0;letter-spacing:-0.01em"><span style="color:var(--text2);font-weight:400">// </span>The Art of Hiding in <span class="accent">Plain Sight</span></h2>
  <div style="margin-top:36px" data-anim="up">
    <span style="font-size:0.85rem;color:var(--text2);font-family:var(--font-mono)">Press <kbd style="background:var(--bg2);border:1px solid var(--card-border);border-radius:4px;padding:2px 10px;font-size:0.8rem">→</kbd> to begin</span>
  </div>
</div>
</section>

<!-- ═══════════════════════════════════════ -->
<!-- SLIDE 1: WHAT IS STEGANOGRAPHY -->
<!-- ═══════════════════════════════════════ -->
<section class="slide" id="slide-1">
<div class="slide-inner" style="text-align:center">
  <h2 class="anim-hidden" data-anim="up">What is <span class="accent">Steganography</span>?</h2>
  <p class="anim-hidden" data-anim="up" style="font-size:1.25rem;margin:0 auto 40px;max-width:800px;text-align:center;line-height:1.8">
    The practice of <span class="highlight">concealing a message within another medium</span> — an image, audio file, or document — so that no one suspects a hidden message even exists.
  </p>
  <!-- Visual comparison: three approaches side by side, presentation style -->
  <div class="anim-hidden" data-anim="up" data-delay="0.2" style="display:flex;gap:0;justify-content:center;align-items:stretch;max-width:900px;margin:0 auto">
    <!-- Cryptography -->
    <div style="flex:1;padding:28px 24px;border:1px solid rgba(255,255,255,0.06);border-right:none;border-radius:12px 0 0 12px;background:rgba(255,255,255,0.02)">
      <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#8892A8" stroke-width="1.5" style="margin-bottom:16px"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/><circle cx="12" cy="16" r="1" fill="#8892A8"/></svg>
      <h3 style="color:var(--text);font-size:1rem;margin-bottom:8px">Cryptography</h3>
      <p style="font-size:0.85rem;color:var(--text2);line-height:1.6"><span class="accent">Scrambles</span> the message.<br>Everyone knows something is hidden — they just can't read it.</p>
    </div>
    <!-- Steganography (highlighted) -->
    <div style="flex:1;padding:28px 24px;border:2px solid var(--accent);border-radius:0;background:rgba(74,237,196,0.04);position:relative;z-index:1">
      <div style="position:absolute;top:-12px;left:50%;transform:translateX(-50%);background:var(--accent);color:var(--bg);font-family:var(--font-mono);font-size:0.7rem;font-weight:700;padding:3px 12px;border-radius:4px;letter-spacing:0.05em">THIS WORKSHOP</div>
      <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#4AEDC4" stroke-width="1.5" style="margin-bottom:16px"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/><path d="M12 9v0" stroke="none"/><rect x="10" y="14" width="4" height="3" rx="1" fill="#4AEDC4" opacity="0.4"/></svg>
      <h3 style="color:var(--accent);font-size:1rem;margin-bottom:8px">Steganography</h3>
      <p style="font-size:0.85rem;color:var(--text);line-height:1.6"><span class="accent">Hides</span> the message's existence.<br>Nobody knows anything is there at all.</p>
    </div>
    <!-- Encoding -->
    <div style="flex:1;padding:28px 24px;border:1px solid rgba(255,255,255,0.06);border-left:none;border-radius:0 12px 12px 0;background:rgba(255,255,255,0.02)">
      <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#8892A8" stroke-width="1.5" style="margin-bottom:16px"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/><line x1="14" y1="4" x2="10" y2="20"/></svg>
      <h3 style="color:var(--text);font-size:1rem;margin-bottom:8px">Encoding</h3>
      <p style="font-size:0.85rem;color:var(--text2);line-height:1.6"><span class="accent">Transforms</span> the data format.<br>Not meant to be secret — e.g., Base64, hex.</p>
    </div>
  </div>
</div>
</section>

<!-- ═══════════════════════════════════════ -->
<!-- SLIDE 2: ANATOMY OF A FILE -->
<!-- ═══════════════════════════════════════ -->
<section class="slide" id="slide-2">
<div class="slide-inner" style="display:flex;gap:30px;align-items:center">
  <div style="flex:1;min-width:280px">
    <h2 class="anim-hidden" data-anim="up" style="font-size:clamp(1.4rem,2.5vw,2.2rem)">Anatomy of a <span class="accent">File</span></h2>
    <div class="anim-hidden" data-anim="up" data-delay="0.1" style="margin-bottom:14px">
      <h3 style="color:var(--accent);font-size:0.85rem">1. File Signature (Magic Bytes)</h3>
      <p style="font-size:0.82rem">The <strong class="highlight">true identity</strong> of a file. The first few bytes reveal what type it really is.</p>
    </div>
    <div class="anim-hidden" data-anim="up" data-delay="0.2" style="margin-bottom:14px">
      <h3 style="color:var(--accent);font-size:0.85rem">2. Metadata (The Label)</h3>
      <p style="font-size:0.82rem">Data <em>about</em> the file — creator, date, camera, <strong class="highlight">comments</strong>. Secrets hide here.</p>
    </div>
    <div class="anim-hidden" data-anim="up" data-delay="0.3">
      <h3 style="color:var(--accent);font-size:0.85rem">3. Body (The Content)</h3>
      <p style="font-size:0.82rem">The actual pixels, text, or audio data that makes up what you see/hear.</p>
    </div>
  </div>
  <!-- File Anatomy SVG Diagram -->
  <div class="file-anatomy-svg anim-hidden-scale" data-anim="scale" style="flex:1;max-width:420px">
    <svg viewBox="0 0 420 400" fill="none" xmlns="http://www.w3.org/2000/svg" style="width:100%;height:auto;max-height:70vh">
      <!-- File shape with folded corner -->
      <path d="M40,10 H330 L390,60 V390 H40 Z" stroke="#4AEDC4" stroke-width="1.5" fill="rgba(11,17,32,0.9)" class="file-outline" stroke-dasharray="1500" stroke-dashoffset="1500"/>
      <path d="M330,10 V60 H390" stroke="#4AEDC4" stroke-width="1.5" fill="none" class="file-outline" stroke-dasharray="100" stroke-dashoffset="100"/>
      <path d="M330,10 L390,60 H330 Z" fill="rgba(74,237,196,0.05)" stroke="none"/>

      <!-- Band 1: Magic Bytes -->
      <g class="band" data-band="1">
        <rect x="55" y="30" width="320" height="110" rx="6" fill="rgba(74,237,196,0.04)" stroke="rgba(74,237,196,0.2)" stroke-width="1"/>
        <text x="70" y="55" fill="#4AEDC4" font-family="Space Grotesk" font-size="13" font-weight="600">FILE SIGNATURE (MAGIC BYTES)</text>
        <text x="310" y="55" fill="#4AEDC4" font-family="Space Grotesk" font-size="9" opacity="0.5">THE TRUE IDENTITY</text>
        <!-- Hex byte boxes -->
        <g class="hex-byte" data-index="0"><rect x="70" y="70" width="52" height="32" rx="4" fill="rgba(74,237,196,0.08)" stroke="rgba(74,237,196,0.3)" stroke-width="1"/><text x="96" y="91" fill="#4AEDC4" font-family="JetBrains Mono" font-size="14" text-anchor="middle" font-weight="700">FF</text></g>
        <g class="hex-byte" data-index="1"><rect x="130" y="70" width="52" height="32" rx="4" fill="rgba(74,237,196,0.08)" stroke="rgba(74,237,196,0.3)" stroke-width="1"/><text x="156" y="91" fill="#4AEDC4" font-family="JetBrains Mono" font-size="14" text-anchor="middle" font-weight="700">D8</text></g>
        <g class="hex-byte" data-index="2"><rect x="190" y="70" width="52" height="32" rx="4" fill="rgba(74,237,196,0.08)" stroke="rgba(74,237,196,0.3)" stroke-width="1"/><text x="216" y="91" fill="#4AEDC4" font-family="JetBrains Mono" font-size="14" text-anchor="middle" font-weight="700">FF</text></g>
        <g class="hex-byte" data-index="3"><rect x="250" y="70" width="52" height="32" rx="4" fill="rgba(74,237,196,0.08)" stroke="rgba(74,237,196,0.3)" stroke-width="1"/><text x="276" y="91" fill="#4AEDC4" font-family="JetBrains Mono" font-size="14" text-anchor="middle" font-weight="700">E0</text></g>
        <!-- Magnifying glass icon -->
        <circle cx="340" cy="86" r="12" stroke="#4AEDC4" stroke-width="1.5" fill="none" opacity="0.4"/>
        <line x1="349" y1="95" x2="358" y2="104" stroke="#4AEDC4" stroke-width="1.5" opacity="0.4"/>
        <text x="70" y="125" fill="#8892A8" font-family="JetBrains Mono" font-size="10">→ This is a JPEG file</text>
      </g>

      <!-- Band 2: Metadata -->
      <g class="band" data-band="2">
        <rect x="55" y="150" width="320" height="120" rx="6" fill="rgba(59,130,246,0.04)" stroke="rgba(59,130,246,0.2)" stroke-width="1"/>
        <text x="70" y="170" fill="#3B82F6" font-family="Space Grotesk" font-size="12" font-weight="600">METADATA HEADER</text>
        <text x="310" y="170" fill="#3B82F6" font-family="Space Grotesk" font-size="9" opacity="0.5">THE LABEL</text>
        <g class="meta-row" data-index="0">
          <text x="70" y="192" fill="#8892A8" font-family="JetBrains Mono" font-size="10">Creator</text>
          <text x="170" y="192" fill="#e2e8f0" font-family="JetBrains Mono" font-size="10">: John Doe</text>
        </g>
        <g class="meta-row" data-index="1">
          <text x="70" y="210" fill="#8892A8" font-family="JetBrains Mono" font-size="10">Date</text>
          <text x="170" y="210" fill="#e2e8f0" font-family="JetBrains Mono" font-size="10">: 2025-03-14</text>
        </g>
        <g class="meta-row" data-index="2">
          <text x="70" y="228" fill="#8892A8" font-family="JetBrains Mono" font-size="10">Camera</text>
          <text x="170" y="228" fill="#e2e8f0" font-family="JetBrains Mono" font-size="10">: Canon EOS R5</text>
        </g>
        <g class="meta-row glow-field" data-index="3">
          <rect x="62" y="237" width="305" height="24" rx="4" fill="rgba(74,237,196,0.08)" stroke="var(--accent)" stroke-width="1.5" class="comment-glow"/>
          <text x="70" y="254" fill="#4AEDC4" font-family="JetBrains Mono" font-size="10" font-weight="700">Comment</text>
          <text x="170" y="254" fill="#4AEDC4" font-family="JetBrains Mono" font-size="10" font-weight="700">: Khana{hidden_here!}</text>
        </g>
      </g>

      <!-- Band 3: Body Content -->
      <g class="band" data-band="3">
        <rect x="55" y="280" width="320" height="100" rx="6" fill="rgba(139,92,246,0.04)" stroke="rgba(139,92,246,0.2)" stroke-width="1"/>
        <text x="70" y="300" fill="#8B5CF6" font-family="Space Grotesk" font-size="12" font-weight="600">FILE BODY CONTENT</text>
        <text x="298" y="300" fill="#8B5CF6" font-family="Space Grotesk" font-size="9" opacity="0.5">THE DATA</text>
        <g transform="translate(70,308)">
          <rect x="0" y="0" width="12" height="12" fill="#2d4a3e" rx="2"/><rect x="14" y="0" width="12" height="12" fill="#1e3a4a" rx="2"/><rect x="28" y="0" width="12" height="12" fill="#3a2d4a" rx="2"/><rect x="42" y="0" width="12" height="12" fill="#2d4a3e" rx="2"/><rect x="56" y="0" width="12" height="12" fill="#4a3d2d" rx="2"/><rect x="70" y="0" width="12" height="12" fill="#1e3a4a" rx="2"/><rect x="84" y="0" width="12" height="12" fill="#2d4a3e" rx="2"/><rect x="98" y="0" width="12" height="12" fill="#3a2d4a" rx="2"/>
          <rect x="0" y="14" width="12" height="12" fill="#1e3a4a" rx="2"/><rect x="14" y="14" width="12" height="12" fill="#4a3d2d" rx="2"/><rect x="28" y="14" width="12" height="12" fill="#2d4a3e" rx="2"/><rect x="42" y="14" width="12" height="12" fill="#3a2d4a" rx="2"/><rect x="56" y="14" width="12" height="12" fill="#1e3a4a" rx="2"/><rect x="70" y="14" width="12" height="12" fill="#2d4a3e" rx="2"/><rect x="84" y="14" width="12" height="12" fill="#4a3d2d" rx="2"/><rect x="98" y="14" width="12" height="12" fill="#1e3a4a" rx="2"/>
        </g>
        <text x="200" y="320" fill="#8892A8" font-family="JetBrains Mono" font-size="9" opacity="0.4">01101001 01101101</text>
        <text x="200" y="333" fill="#8892A8" font-family="JetBrains Mono" font-size="9" opacity="0.3">01100001 01100111</text>
        <text x="200" y="346" fill="#8892A8" font-family="JetBrains Mono" font-size="9" opacity="0.2">01100101 00101110</text>
        <text x="200" y="359" fill="#8892A8" font-family="JetBrains Mono" font-size="9" opacity="0.15">01110000 01101110</text>
        <text x="70" y="375" fill="#8892A8" font-family="JetBrains Mono" font-size="9" opacity="0.6">↑ Pixels / audio / text content</text>
      </g>

      <!-- Decorative circuit traces -->
      <line x1="40" y1="140" x2="25" y2="140" stroke="#4AEDC4" stroke-width="0.5" opacity="0.2"/>
      <line x1="25" y1="140" x2="25" y2="275" stroke="#4AEDC4" stroke-width="0.5" opacity="0.2"/>
      <line x1="25" y1="275" x2="40" y2="275" stroke="#4AEDC4" stroke-width="0.5" opacity="0.2"/>
      <circle cx="25" cy="140" r="2" fill="#4AEDC4" opacity="0.3"/>
      <circle cx="25" cy="275" r="2" fill="#4AEDC4" opacity="0.3"/>
    </svg>
  </div>
</div>
</section>

<!-- ═══════════════════════════════════════ -->
<!-- SLIDE 3: EXTENSION VS SIGNATURE -->
<!-- ═══════════════════════════════════════ -->
<section class="slide" id="slide-3">
<div class="slide-inner" style="text-align:center">
  <h2 class="anim-hidden" data-anim="up">Extension vs. <span class="accent">Signature</span></h2>

  <!-- Sub-step 0: What is a file extension? -->
  <div class="ext-content active" id="ext-step-0">
    <p style="margin:16px auto 24px;color:var(--text2);max-width:600px">A file extension is the part after the dot in a filename. It tells your operating system which application to use.</p>
    <div style="display:flex;gap:24px;justify-content:center;flex-wrap:wrap;margin-bottom:24px">
      <div class="card" style="padding:20px 28px;text-align:center">
        <svg width="60" height="70" viewBox="0 0 60 70" fill="none" style="margin:0 auto 10px">
          <rect x="5" y="2" width="40" height="50" rx="4" stroke="var(--text2)" stroke-width="1.5" fill="rgba(255,255,255,0.03)"/>
          <path d="M30,2 V16 H45" stroke="var(--text2)" stroke-width="1.5" fill="none"/>
        </svg>
        <span style="font-family:var(--font-mono);font-size:1.1rem;color:#ff6b6b;font-weight:700">report.txt</span>
        <p style="font-size:0.75rem;color:var(--text2);margin-top:6px">Opens in text editor</p>
      </div>
      <div class="card" style="padding:20px 28px;text-align:center">
        <svg width="60" height="70" viewBox="0 0 60 70" fill="none" style="margin:0 auto 10px">
          <rect x="5" y="2" width="40" height="50" rx="4" stroke="var(--text2)" stroke-width="1.5" fill="rgba(255,255,255,0.03)"/>
          <path d="M30,2 V16 H45" stroke="var(--text2)" stroke-width="1.5" fill="none"/>
        </svg>
        <span style="font-family:var(--font-mono);font-size:1.1rem;color:#3B82F6;font-weight:700">photo.jpg</span>
        <p style="font-size:0.75rem;color:var(--text2);margin-top:6px">Opens in image viewer</p>
      </div>
      <div class="card" style="padding:20px 28px;text-align:center">
        <svg width="60" height="70" viewBox="0 0 60 70" fill="none" style="margin:0 auto 10px">
          <rect x="5" y="2" width="40" height="50" rx="4" stroke="var(--text2)" stroke-width="1.5" fill="rgba(255,255,255,0.03)"/>
          <path d="M30,2 V16 H45" stroke="var(--text2)" stroke-width="1.5" fill="none"/>
        </svg>
        <span style="font-family:var(--font-mono);font-size:1.1rem;color:#f59e0b;font-weight:700">data.zip</span>
        <p style="font-size:0.75rem;color:var(--text2);margin-top:6px">Opens in archive tool</p>
      </div>
    </div>
    <p style="font-size:0.85rem;color:var(--text2)">But what if someone <strong style="color:#ff6b6b">changes the extension</strong>?</p>
  </div>

  <!-- Sub-step 1: Extensions can lie -->
  <div class="ext-content" id="ext-step-1">
    <p style="margin:16px auto 24px;color:var(--text2);max-width:600px">Anyone can rename a file. The extension does <strong style="color:#ff6b6b">not</strong> determine what is actually inside.</p>
    <div class="card" style="max-width:500px;margin:0 auto 24px;padding:30px;text-align:center">
      <svg width="120" height="140" viewBox="0 0 120 140" fill="none" style="margin:0 auto 16px">
        <rect x="15" y="5" width="80" height="100" rx="6" stroke="#ff6b6b" stroke-width="1.5" fill="rgba(255,107,107,0.05)"/>
        <path d="M70,5 V30 H95" stroke="#ff6b6b" stroke-width="1.5" fill="none"/>
        <g class="ext-label">
          <rect x="25" y="110" width="60" height="24" rx="4" fill="rgba(255,107,107,0.15)" stroke="#ff6b6b" stroke-width="1"/>
          <text x="55" y="127" fill="#ff6b6b" font-family="JetBrains Mono" font-size="14" text-anchor="middle" font-weight="700">.txt</text>
        </g>
        <g class="true-type" opacity="0">
          <rect x="25" y="110" width="60" height="24" rx="4" fill="rgba(74,237,196,0.15)" stroke="#4AEDC4" stroke-width="1"/>
          <text x="55" y="127" fill="#4AEDC4" font-family="JetBrains Mono" font-size="14" text-anchor="middle" font-weight="700">.jpg</text>
        </g>
      </svg>
      <p style="font-size:0.9rem;color:var(--text2)">This file says <strong style="color:#ff6b6b">.txt</strong> but it is really a <strong class="accent">JPEG image</strong></p>
    </div>
    <p style="font-size:0.85rem;color:var(--text2)">So how do we find the <span class="accent">truth</span>?</p>
  </div>

  <!-- Sub-step 2: Magic bytes tell the truth -->
  <div class="ext-content" id="ext-step-2">
    <p style="margin:16px auto 24px;color:var(--text2);max-width:600px">Every file starts with a few <strong class="accent">magic bytes</strong> (also called a file signature) that identify its true type.</p>
    <div class="card" style="max-width:560px;margin:0 auto 24px;padding:30px;text-align:center">
      <svg width="420" height="90" viewBox="0 0 420 90" fill="none" style="margin:0 auto 12px">
        <g class="sig-bytes">
          <rect x="0" y="15" width="55" height="40" rx="6" fill="rgba(74,237,196,0.08)" stroke="rgba(74,237,196,0.3)"/><text x="27" y="41" fill="#4AEDC4" font-family="JetBrains Mono" font-size="18" text-anchor="middle" font-weight="700" class="sig-byte">89</text>
          <rect x="65" y="15" width="55" height="40" rx="6" fill="rgba(74,237,196,0.08)" stroke="rgba(74,237,196,0.3)"/><text x="92" y="41" fill="#4AEDC4" font-family="JetBrains Mono" font-size="18" text-anchor="middle" font-weight="700" class="sig-byte">50</text>
          <rect x="130" y="15" width="55" height="40" rx="6" fill="rgba(74,237,196,0.08)" stroke="rgba(74,237,196,0.3)"/><text x="157" y="41" fill="#4AEDC4" font-family="JetBrains Mono" font-size="18" text-anchor="middle" font-weight="700" class="sig-byte">4E</text>
          <rect x="195" y="15" width="55" height="40" rx="6" fill="rgba(74,237,196,0.08)" stroke="rgba(74,237,196,0.3)"/><text x="222" y="41" fill="#4AEDC4" font-family="JetBrains Mono" font-size="18" text-anchor="middle" font-weight="700" class="sig-byte">47</text>
        </g>
        <text x="275" y="42" fill="var(--text2)" font-size="24">--></text>
        <text x="320" y="43" fill="#4AEDC4" font-family="Space Grotesk" font-size="22" font-weight="700" class="sig-result" opacity="0">PNG!</text>
        <text x="27" y="78" fill="#8892A8" font-family="JetBrains Mono" font-size="11">First bytes of every file = its identity</text>
      </svg>
    </div>
    <p style="font-size:0.85rem;color:var(--text2)">No matter what the extension says, the <span class="accent">magic bytes never lie</span>.</p>
  </div>

  <!-- Sub-step 3: Common signatures reference -->
  <div class="ext-content" id="ext-step-3">
    <p style="margin:16px auto 24px;color:var(--text2);max-width:600px">Here are the most common file signatures you will encounter in forensics:</p>
    <div style="display:flex;gap:30px;align-items:flex-start;justify-content:center">
      <table class="magic-table" style="max-width:400px">
        <thead><tr><th>Magic Bytes</th><th>File Type</th></tr></thead>
        <tbody>
          <tr><td class="hex">FF D8 FF</td><td>JPEG</td></tr>
          <tr><td class="hex">89 50 4E 47</td><td>PNG</td></tr>
          <tr><td class="hex">50 4B 03 04</td><td>ZIP / DOCX / APK</td></tr>
          <tr><td class="hex">25 50 44 46</td><td>PDF</td></tr>
          <tr><td class="hex">47 49 46 38</td><td>GIF</td></tr>
          <tr><td class="hex">52 49 46 46</td><td>WAV / AVI</td></tr>
        </tbody>
      </table>
    </div>
    <div class="pro-tip" style="max-width:500px;margin:20px auto 0">
      <span class="pro-tip-icon" style="color:var(--accent);font-family:var(--font-mono);font-weight:700">&gt;</span>
      <div class="pro-tip-text">Forensics tools trust the <span class="accent">signature</span>, not the extension. The <code style="font-family:var(--font-mono);color:var(--accent)">file</code> command reads these magic bytes.</div>
    </div>
  </div>
</div>
</section>

<!-- ═══════════════════════════════════════ -->
<!-- SLIDE 4: TOOL — file -->
<!-- ═══════════════════════════════════════ -->
<section class="slide" id="slide-4">
<div class="slide-inner">
  <h2 class="anim-hidden" data-anim="up">Tool: <span class="accent">file</span></h2>
  <p class="anim-hidden" data-anim="up" style="margin-bottom:24px">Reads the magic bytes to determine a file's <strong class="highlight">true type</strong> — regardless of what the extension says.</p>
  <div class="anim-hidden" data-anim="up" data-delay="0.2">
    <div class="terminal" id="term-file">
      <div class="terminal-header"><span class="terminal-dot r"></span><span class="terminal-dot y"></span><span class="terminal-dot g"></span><span class="terminal-title">Terminal</span></div>
      <div class="terminal-body">
        <div class="terminal-line"><span class="prompt">$ </span><span class="cmd" data-type-text="file suspicious.txt"></span><span class="cursor" style="display:none">▌</span></div>
        <div class="terminal-line" style="opacity:0"><span class="output">suspicious.txt: <span class="hl">PNG image data</span>, 800 x 600, 8-bit/color RGBA</span></div>
      </div>
    </div>
  </div>
  <div class="pro-tip anim-hidden" data-anim="up" data-delay="0.4">
    <span class="pro-tip-icon" style="color:var(--accent);font-family:var(--font-mono);font-weight:700">&gt;</span>
    <div class="pro-tip-text"><strong>Pro tip:</strong> Always run <code style="font-family:var(--font-mono);color:var(--accent)">file</code> first on any unknown file in a CTF!</div>
  </div>
</div>
</section>

<!-- ═══════════════════════════════════════ -->
<!-- SLIDE 5: TOOL — strings -->
<!-- ═══════════════════════════════════════ -->
<section class="slide" id="slide-5">
<div class="slide-inner">
  <h2 class="anim-hidden" data-anim="up">Tool: <span class="accent">strings</span></h2>
  <p class="anim-hidden" data-anim="up" style="margin-bottom:16px">Scans a binary file and extracts every sequence of <strong class="highlight">printable ASCII characters</strong> (4+ characters by default). Any readable text buried inside images, executables, or documents — <code style="font-family:var(--font-mono);color:var(--accent)">strings</code> will find it.</p>
  <div class="split" style="margin-bottom:16px">
    <div class="split-left anim-hidden" data-anim="left" data-delay="0.15">
      <div class="terminal" id="term-strings">
        <div class="terminal-header"><span class="terminal-dot r"></span><span class="terminal-dot y"></span><span class="terminal-dot g"></span><span class="terminal-title">Terminal</span></div>
        <div class="terminal-body">
          <div class="terminal-line"><span class="prompt">$ </span><span class="cmd" data-type-text="strings image.jpg"></span><span class="cursor" style="display:none">▌</span></div>
          <div class="terminal-line" style="opacity:0"><span class="output">JFIF</span></div>
          <div class="terminal-line" style="opacity:0"><span class="output">Exif</span></div>
          <div class="terminal-line" style="opacity:0"><span class="output">Adobe Photoshop</span></div>
          <div class="terminal-line" style="opacity:0"><span class="output">x#Gk&amp;mP9</span></div>
          <div class="terminal-line" style="opacity:0"><span class="flag">Khana{strings_see_everything}</span></div>
          <div class="terminal-line" style="opacity:0"><span class="output">--- END ---</span></div>
        </div>
      </div>
    </div>
    <div class="split-right anim-hidden" data-anim="right" data-delay="0.3">
      <div style="font-size:0.85rem;color:var(--text2)">
        <p style="margin-bottom:12px"><strong style="color:var(--text)">Why it works:</strong> Images, executables, and documents all contain readable text fragments mixed with binary data. <code style="font-family:var(--font-mono);color:var(--accent)">strings</code> pulls them all out.</p>
        <p style="margin-bottom:12px"><strong style="color:var(--text)">Useful flags:</strong></p>
        <ul style="margin:0 0 12px 16px;list-style:none">
          <li style="margin-bottom:6px"><code style="font-family:var(--font-mono);color:var(--accent)">-n 8</code> — only strings with 8+ characters (less noise)</li>
          <li style="margin-bottom:6px"><code style="font-family:var(--font-mono);color:var(--accent)">-e l</code> — search 16-bit little-endian (Unicode text)</li>
        </ul>
        <p><strong style="color:var(--text)">Common patterns:</strong></p>
        <ul style="margin:0 0 0 16px;list-style:none">
          <li style="margin-bottom:4px"><code style="font-family:var(--font-mono);font-size:0.8rem;color:var(--accent)">strings file | grep -i flag</code></li>
          <li style="margin-bottom:4px"><code style="font-family:var(--font-mono);font-size:0.8rem;color:var(--accent)">strings file | head -20</code></li>
          <li style="margin-bottom:4px"><code style="font-family:var(--font-mono);font-size:0.8rem;color:var(--accent)">strings -n 10 file | sort -u</code></li>
        </ul>
      </div>
    </div>
  </div>
  <div class="pro-tip anim-hidden" data-anim="up" data-delay="0.4">
    <span class="pro-tip-icon" style="color:var(--accent);font-family:var(--font-mono);font-weight:700">&gt;</span>
    <div class="pro-tip-text"><strong>Pro tip:</strong> Always pipe through <code style="font-family:var(--font-mono);color:var(--accent)">grep</code> first — raw <code style="font-family:var(--font-mono);color:var(--accent)">strings</code> output on a large file can be thousands of lines.</div>
  </div>
</div>
</section>

<!-- ═══════════════════════════════════════ -->
<!-- SLIDE 6: TOOL — exiftool -->
<!-- ═══════════════════════════════════════ -->
<section class="slide" id="slide-6">
<div class="slide-inner">
  <h2 class="anim-hidden" data-anim="up">Tool: <span class="accent">exiftool</span> <span style="font-size:0.5em;color:var(--text2)">The Magnifier</span></h2>
  <div class="split">
    <div class="split-left anim-hidden-left" data-anim="left">
      <p style="margin-bottom:16px">Reads and writes <strong class="highlight">metadata</strong> embedded in files. EXIF data, comments, GPS, timestamps — everything the file knows about itself.</p>
      <p style="font-size:0.9rem">In CTFs, flags are often hidden in the <span class="highlight">Comment</span> or <span class="highlight">UserComment</span> fields.</p>
      <div style="margin-top:20px">
        <div class="terminal small" id="term-exif-write">
          <div class="terminal-header"><span class="terminal-dot r"></span><span class="terminal-dot y"></span><span class="terminal-dot g"></span><span class="terminal-title">Writing metadata</span></div>
          <div class="terminal-body">
            <div class="terminal-line"><span class="prompt">$ </span><span class="cmd" data-type-text='exiftool -Comment="Khana{hidden}" image.jpg'></span><span class="cursor" style="display:none">▌</span></div>
          </div>
        </div>
      </div>
    </div>
    <div class="split-right anim-hidden-right" data-anim="right">
      <div class="terminal" id="term-exif">
        <div class="terminal-header"><span class="terminal-dot r"></span><span class="terminal-dot y"></span><span class="terminal-dot g"></span><span class="terminal-title">Terminal</span></div>
        <div class="terminal-body">
          <div class="terminal-line"><span class="prompt">$ </span><span class="cmd" data-type-text="exiftool challenge.jpg"></span><span class="cursor" style="display:none">▌</span></div>
          <div class="terminal-line" style="opacity:0"><span class="output">File Name        : challenge.jpg</span></div>
          <div class="terminal-line" style="opacity:0"><span class="output">File Size        : 2.1 MB</span></div>
          <div class="terminal-line" style="opacity:0"><span class="output">MIME Type        : image/jpeg</span></div>
          <div class="terminal-line" style="opacity:0"><span class="output">Image Width      : 1920</span></div>
          <div class="terminal-line" style="opacity:0"><span class="output">Image Height     : 1080</span></div>
          <div class="terminal-line" style="opacity:0"><span class="flag">Comment          : Khana{hidden_in_metadata}</span></div>
        </div>
      </div>
    </div>
  </div>
</div>
</section>

<!-- ═══════════════════════════════════════ -->
<!-- SLIDE 7: TOOL — xxd -->
<!-- ═══════════════════════════════════════ -->
<section class="slide" id="slide-7">
<div class="slide-inner">
  <h2 class="anim-hidden" data-anim="up">Tool: <span class="accent">xxd</span> / hexdump</h2>
  <p class="anim-hidden" data-anim="up" style="margin-bottom:24px">When you need to see the <strong class="highlight">raw bytes</strong> of a file. The hex dump shows both hex values and their ASCII representation.</p>
  <div class="anim-hidden" data-anim="up" data-delay="0.2">
    <div class="terminal" id="term-xxd">
      <div class="terminal-header"><span class="terminal-dot r"></span><span class="terminal-dot y"></span><span class="terminal-dot g"></span><span class="terminal-title">Terminal</span></div>
      <div class="terminal-body">
        <div class="terminal-line"><span class="prompt">$ </span><span class="cmd" data-type-text="xxd image.jpg | head -5"></span><span class="cursor" style="display:none">▌</span></div>
        <div class="terminal-line" style="opacity:0"><span class="output">00000000: <span class="hl">ffd8 ffe0</span> 0010 4a46 4946 0001 0100 0001  ......<span class="hl">JFIF</span>......</span></div>
        <div class="terminal-line" style="opacity:0"><span class="output">00000010: 0001 0000 ffe1 0068 4578 6966 0000 4d4d  .......h<span class="hl">Exif</span>..MM</span></div>
        <div class="terminal-line" style="opacity:0"><span class="output">00000020: 002a 0000 0008 0005 0112 0003 0000 0001  .*.............</span></div>
        <div class="terminal-line" style="opacity:0"><span class="output">00000030: 0001 0000 011a 0005 0000 0001 0000 004a  ...............J</span></div>
        <div class="terminal-line" style="opacity:0"><span class="output">00000040: 011b 0005 0000 0001 0000 0052 0128 0003  ...........R.(..</span></div>
      </div>
    </div>
  </div>
  <div class="pro-tip anim-hidden" data-anim="up" data-delay="0.4">
    <span class="pro-tip-icon" style="color:var(--accent);font-family:var(--font-mono);font-weight:700">&gt;</span>
    <div class="pro-tip-text"><strong>Pro tip:</strong> Look for <strong>readable ASCII strings</strong> in the right column of the hex dump — flags sometimes hide there in plain sight.</div>
  </div>
</div>
</section>

<!-- ═══════════════════════════════════════ -->
<!-- SLIDE 8: DEMO 1 — BASIC FORENSICS -->
<!-- ═══════════════════════════════════════ -->
<section class="slide" id="slide-8">
<div class="slide-inner" style="text-align:center">
  <div style="margin-bottom:24px">
    <span style="font-family:var(--font-mono);font-size:0.85rem;color:var(--accent);letter-spacing:2px;text-transform:uppercase" class="anim-hidden" data-anim="up">Live Demo</span>
  </div>
  <h1 class="anim-hidden" data-anim="scale" style="font-size:clamp(3rem,8vw,6rem);color:var(--accent);text-shadow:0 0 40px var(--accent-glow);margin-bottom:16px">DEMO</h1>
  <h2 class="anim-hidden" data-anim="up" data-delay="0.2" style="font-weight:400;color:var(--text2);margin-bottom:32px">Basic Forensics</h2>
  <div class="anim-hidden" data-anim="up" data-delay="0.4" style="display:inline-flex;gap:16px;flex-wrap:wrap;justify-content:center">
    <span style="background:var(--bg2);border:1px solid var(--card-border);border-radius:6px;padding:8px 16px;font-family:var(--font-mono);font-size:0.9rem;color:var(--text)">file</span>
    <span style="background:var(--bg2);border:1px solid var(--card-border);border-radius:6px;padding:8px 16px;font-family:var(--font-mono);font-size:0.9rem;color:var(--text)">strings</span>
    <span style="background:var(--bg2);border:1px solid var(--card-border);border-radius:6px;padding:8px 16px;font-family:var(--font-mono);font-size:0.9rem;color:var(--text)">exiftool</span>
    <span style="background:var(--bg2);border:1px solid var(--card-border);border-radius:6px;padding:8px 16px;font-family:var(--font-mono);font-size:0.9rem;color:var(--text)">xxd</span>
  </div>
  <p class="anim-hidden" data-anim="up" data-delay="0.6" style="margin-top:24px;color:var(--text2);font-family:var(--font-mono);font-size:0.8rem">baby_patrick.txt &middot; hacker_penguin.jpg &middot; mcafee_photo.jpg &middot; pilot.jpg</p>
</div>
</section>

<!-- ═══════════════════════════════════════ -->
<!-- SLIDE 9: LSB METHOD -->
<!-- ═══════════════════════════════════════ -->
<section class="slide" id="slide-9">
<div class="slide-inner" style="text-align:center">
  <h2 class="anim-hidden" data-anim="up">The <span class="accent">LSB</span> Method</h2>
  <p class="anim-hidden" data-anim="up" style="margin:0 auto 20px;text-align:center">Least Significant Bit — hiding data in the <strong class="highlight">last bit</strong> of each color channel.</p>

  <!-- Sub-step 0: Pixel grid -->
  <div class="lsb-content active" id="lsb-step-0">
    <p style="font-size:0.85rem;color:var(--text2);margin-bottom:16px">An 8×8 pixel grid — each square is a pixel with RGB values</p>
    <div class="pixel-grid" id="pixelGrid"></div>
    <p class="substep-indicator">Step 1/7 — Press → to continue</p>
  </div>

  <!-- Sub-step 1: Zoom into pixel -->
  <div class="lsb-content" id="lsb-step-1">
    <div style="display:flex;justify-content:center;gap:40px;align-items:center;flex-wrap:wrap">
      <div class="pixel-cell" id="zoomedPixel" style="width:100px;height:100px;border-radius:12px;border:3px solid var(--accent)"></div>
      <div style="text-align:left">
        <h3 style="color:var(--accent)">Pixel (3, 2)</h3>
        <p style="font-family:var(--font-mono);font-size:1rem"><span style="color:#ff6b6b">R = 210</span></p>
        <p style="font-family:var(--font-mono);font-size:1rem"><span style="color:#4ade80">G = 180</span></p>
        <p style="font-family:var(--font-mono);font-size:1rem"><span style="color:#60a5fa">B = 76</span></p>
      </div>
    </div>
    <p class="substep-indicator">Step 2/7 — Press → to continue</p>
  </div>

  <!-- Sub-step 2: Binary representation -->
  <div class="lsb-content" id="lsb-step-2">
    <h3>Binary Representation</h3>
    <div style="margin:20px 0;font-family:var(--font-mono);font-size:1.1rem;line-height:2.5">
      <div><span style="color:#ff6b6b">R = </span><span class="bit">1</span><span class="bit">1</span><span class="bit">0</span><span class="bit">1</span><span class="bit">0</span><span class="bit">0</span><span class="bit">1</span><span class="bit lsb">0</span></div>
      <div><span style="color:#4ade80">G = </span><span class="bit">1</span><span class="bit">0</span><span class="bit">1</span><span class="bit">1</span><span class="bit">0</span><span class="bit">1</span><span class="bit">0</span><span class="bit lsb">0</span></div>
      <div><span style="color:#60a5fa">B = </span><span class="bit">0</span><span class="bit">1</span><span class="bit">0</span><span class="bit">0</span><span class="bit">1</span><span class="bit">1</span><span class="bit">0</span><span class="bit lsb">0</span></div>
    </div>
    <p style="font-size:0.9rem;color:var(--text2)">The <span class="accent">last bit</span> (highlighted) is the Least Significant Bit</p>
    <p class="substep-indicator">Step 3/7 — Press → to continue</p>
  </div>

  <!-- Sub-step 3: Flip the LSBs -->
  <div class="lsb-content" id="lsb-step-3">
    <h3>Flipping the LSB</h3>
    <div style="margin:20px 0;font-family:var(--font-mono);font-size:1rem;line-height:2.5;display:flex;justify-content:center;gap:40px">
      <div style="text-align:left">
        <p style="color:var(--text2);font-size:0.85rem;margin-bottom:8px">Original:</p>
        <div><span style="color:#ff6b6b">R = </span>1101001<span style="color:var(--text2)">0</span></div>
        <div><span style="color:#4ade80">G = </span>1011010<span style="color:var(--text2)">0</span></div>
        <div><span style="color:#60a5fa">B = </span>0100110<span style="color:var(--text2)">0</span></div>
      </div>
      <div style="font-size:2rem;align-self:center;color:var(--accent)">→</div>
      <div style="text-align:left">
        <p style="color:var(--accent);font-size:0.85rem;margin-bottom:8px">Modified:</p>
        <div><span style="color:#ff6b6b">R = </span>1101001<span class="bit lsb">1</span></div>
        <div><span style="color:#4ade80">G = </span>1011010<span class="bit lsb">0</span></div>
        <div><span style="color:#60a5fa">B = </span>0100110<span class="bit lsb">1</span></div>
      </div>
    </div>
    <p style="font-size:0.9rem;color:var(--text2)">We just encoded the bits <span class="accent">1, 0, 1</span> into one pixel</p>
    <p class="substep-indicator">Step 4/7 — Press → to continue</p>
  </div>

  <!-- Sub-step 4: Color comparison -->
  <div class="lsb-content" id="lsb-step-4">
    <h3>Can You Tell the Difference?</h3>
    <div class="color-compare" style="margin:24px 0">
      <div>
        <div class="color-swatch" style="background:rgb(210,180,76)"></div>
        <div class="color-label">Original<br>rgb(210, 180, 76)</div>
      </div>
      <div style="font-size:1.5rem;color:var(--text2);padding:0 20px">vs</div>
      <div>
        <div class="color-swatch" style="background:rgb(211,180,77)"></div>
        <div class="color-label">Modified<br>rgb(211, 180, 77)</div>
      </div>
    </div>
    <p style="font-size:0.95rem;color:var(--accent);font-weight:600">Imperceptible to the human eye.</p>
    <p class="substep-indicator">Step 5/7 — Press → to continue</p>
  </div>

  <!-- Sub-step 5: Encoding across pixels -->
  <div class="lsb-content" id="lsb-step-5">
    <h3>Encoding a Flag Across Pixels</h3>
    <p style="font-size:0.9rem;color:var(--text2);margin-bottom:20px">Each pixel hides 3 bits (one per channel). To spell "Khana{}" we need many pixels:</p>
    <div style="font-family:var(--font-mono);font-size:0.85rem;background:var(--code-bg);padding:16px;border-radius:8px;border:1px solid var(--card-border);display:inline-block;text-align:left">
      <div>Pixel 1: <span class="accent">0 1 1</span>  ← bits of 'f' (01100110)</div>
      <div>Pixel 2: <span class="accent">0 0 1</span></div>
      <div>Pixel 3: <span class="accent">1 0 0</span></div>
      <div>Pixel 4: <span class="accent">1 1 0</span>  ← bits of 'l' (01101100)</div>
      <div style="color:var(--text2)">...and so on for every character</div>
    </div>
    <p class="substep-indicator">Step 6/7 — Press → to continue</p>
  </div>

  <!-- Sub-step 6: Side-by-side landscape -->
  <div class="lsb-content" id="lsb-step-6">
    <h3>Real-World Example</h3>
    <div class="landscape-compare">
      <div class="landscape-frame">
        <svg width="320" height="200" viewBox="0 0 320 200">
          <defs>
            <linearGradient id="sky1" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#0f1729"/><stop offset="100%" style="stop-color:#1a1a3e"/></linearGradient>
            <linearGradient id="water1" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#0c1a30"/><stop offset="100%" style="stop-color:#081420"/></linearGradient>
          </defs>
          <rect width="320" height="200" fill="url(#sky1)" rx="6"/>
          <circle cx="260" cy="40" r="20" fill="#1e293b" opacity="0.6"/>
          <circle cx="50" cy="25" r="1.5" fill="white" opacity="0.7"/><circle cx="120" cy="15" r="1" fill="white" opacity="0.5"/><circle cx="200" cy="35" r="1.2" fill="white" opacity="0.6"/><circle cx="280" cy="20" r="0.8" fill="white" opacity="0.4"/><circle cx="160" cy="45" r="1" fill="white" opacity="0.3"/>
          <polygon points="0,140 50,80 100,120 140,70 200,130 240,90 300,110 320,100 320,200 0,200" fill="#0f172a"/>
          <polygon points="0,160 80,100 160,140 200,110 260,130 320,120 320,200 0,200" fill="#1e293b"/>
          <rect y="155" width="320" height="45" fill="url(#water1)" opacity="0.8"/>
          <line x1="60" y1="170" x2="100" y2="170" stroke="rgba(74,237,196,0.1)" stroke-width="0.5"/>
          <line x1="150" y1="175" x2="200" y2="175" stroke="rgba(74,237,196,0.08)" stroke-width="0.5"/>
          <line x1="220" y1="168" x2="280" y2="168" stroke="rgba(74,237,196,0.06)" stroke-width="0.5"/>
        </svg>
        <p>Original Image</p>
      </div>
      <div class="landscape-frame">
        <svg width="320" height="200" viewBox="0 0 320 200">
          <defs>
            <linearGradient id="sky2" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#0f1729"/><stop offset="100%" style="stop-color:#1a1a3e"/></linearGradient>
            <linearGradient id="water2" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#0c1a30"/><stop offset="100%" style="stop-color:#081420"/></linearGradient>
          </defs>
          <rect width="320" height="200" fill="url(#sky2)" rx="6"/>
          <circle cx="260" cy="40" r="20" fill="#1e293b" opacity="0.6"/>
          <circle cx="50" cy="25" r="1.5" fill="white" opacity="0.7"/><circle cx="120" cy="15" r="1" fill="white" opacity="0.5"/><circle cx="200" cy="35" r="1.2" fill="white" opacity="0.6"/><circle cx="280" cy="20" r="0.8" fill="white" opacity="0.4"/><circle cx="160" cy="45" r="1" fill="white" opacity="0.3"/>
          <polygon points="0,140 50,80 100,120 140,70 200,130 240,90 300,110 320,100 320,200 0,200" fill="#0f172a"/>
          <polygon points="0,160 80,100 160,140 200,110 260,130 320,120 320,200 0,200" fill="#1e293b"/>
          <rect y="155" width="320" height="45" fill="url(#water2)" opacity="0.8"/>
          <line x1="60" y1="170" x2="100" y2="170" stroke="rgba(74,237,196,0.1)" stroke-width="0.5"/>
          <line x1="150" y1="175" x2="200" y2="175" stroke="rgba(74,237,196,0.08)" stroke-width="0.5"/>
          <line x1="220" y1="168" x2="280" y2="168" stroke="rgba(74,237,196,0.06)" stroke-width="0.5"/>
        </svg>
        <p>Stego Image <span class="accent">(contains hidden flag!)</span></p>
      </div>
    </div>
    <p style="font-size:0.95rem;color:var(--accent);margin-top:16px;font-weight:600">Identical to the human eye — but one holds a secret.</p>
    <p class="substep-indicator">Step 7/7 — Press → for next slide</p>
  </div>
</div>
</section>

<!-- ═══════════════════════════════════════ -->
<!-- SLIDE 10: TOOL — steghide -->
<!-- ═══════════════════════════════════════ -->
<section class="slide" id="slide-10">
<div class="slide-inner">
  <h2 class="anim-hidden" data-anim="up">Tool: <span class="accent">steghide</span></h2>
  <p class="anim-hidden" data-anim="up" style="margin-bottom:24px">Hides and extracts data using LSB steganography in <strong class="highlight">JPEG and BMP</strong> files. Supports password protection.</p>
  <div class="terminals-row anim-hidden" data-anim="up" data-delay="0.2">
    <div class="terminal" id="term-steghide-embed">
      <div class="terminal-header"><span class="terminal-dot r"></span><span class="terminal-dot y"></span><span class="terminal-dot g"></span><span class="terminal-title">Embedding</span></div>
      <div class="terminal-body">
        <div class="terminal-line"><span class="prompt">$ </span><span class="cmd" data-type-text="steghide embed -cf cover.jpg -ef secret.txt -p mypassword"></span><span class="cursor" style="display:none">▌</span></div>
        <div class="terminal-line" style="opacity:0"><span class="output">embedding "secret.txt" in "cover.jpg"... done</span></div>
      </div>
    </div>
    <div class="terminal" id="term-steghide-extract">
      <div class="terminal-header"><span class="terminal-dot r"></span><span class="terminal-dot y"></span><span class="terminal-dot g"></span><span class="terminal-title">Extracting</span></div>
      <div class="terminal-body">
        <div class="terminal-line"><span class="prompt">$ </span><span class="cmd" data-type-text="steghide extract -sf stego.jpg -p mypassword"></span><span class="cursor" style="display:none">▌</span></div>
        <div class="terminal-line" style="opacity:0"><span class="output">wrote extracted data to "<span class="hl">secret.txt</span>"</span></div>
      </div>
    </div>
  </div>
  <div class="pro-tip anim-hidden" data-anim="up" data-delay="0.4">
    <span class="pro-tip-icon" style="color:var(--accent);font-family:var(--font-mono);font-weight:700">&gt;</span>
    <div class="pro-tip-text"><strong>Pro tip:</strong> Try an <strong>empty password</strong> first! Many CTF challenges don't use one: <code style="font-family:var(--font-mono);color:var(--accent)">steghide extract -sf stego.jpg -p ""</code></div>
  </div>
</div>
</section>

<!-- ═══════════════════════════════════════ -->
<!-- SLIDE 11: TOOL — binwalk -->
<!-- ═══════════════════════════════════════ -->
<section class="slide" id="slide-11">
<div class="slide-inner">
  <h2 class="anim-hidden" data-anim="up">Tool: <span class="accent">binwalk</span> <span style="font-size:0.5em;color:var(--text2)">The File Carver</span></h2>
  <p class="anim-hidden" data-anim="up" style="margin-bottom:24px">Scans a file for <strong class="highlight">embedded files</strong> hidden inside it. Files can be appended to the end of other files.</p>
  <div class="split">
    <div class="split-left">
      <div class="anim-hidden" data-anim="up" data-delay="0.2">
        <div class="terminal" id="term-binwalk">
          <div class="terminal-header"><span class="terminal-dot r"></span><span class="terminal-dot y"></span><span class="terminal-dot g"></span><span class="terminal-title">Terminal</span></div>
          <div class="terminal-body">
            <div class="terminal-line"><span class="prompt">$ </span><span class="cmd" data-type-text="binwalk image.jpg"></span><span class="cursor" style="display:none">▌</span></div>
            <div class="terminal-line" style="opacity:0"><span class="output">DECIMAL     HEXADECIMAL   DESCRIPTION</span></div>
            <div class="terminal-line" style="opacity:0"><span class="output">0           0x0           JPEG image data</span></div>
            <div class="terminal-line" style="opacity:0"><span class="hl">45678       0xB26E        Zip archive data</span></div>
            <div class="terminal-line" style="opacity:0"><span class="output"> </span></div>
            <div class="terminal-line"><span class="prompt">$ </span><span class="cmd" data-type-text="binwalk -e image.jpg"></span><span class="cursor" style="display:none">▌</span></div>
            <div class="terminal-line" style="opacity:0"><span class="output">Extracted to: <span class="hl">_image.jpg.extracted/</span></span></div>
          </div>
        </div>
      </div>
    </div>
    <div class="split-right anim-hidden-right" data-anim="right">
      <!-- Concatenated file diagram -->
      <svg width="280" height="200" viewBox="0 0 280 200" fill="none" style="margin:0 auto;display:block">
        <rect x="20" y="20" width="240" height="70" rx="8" fill="rgba(59,130,246,0.1)" stroke="#3B82F6" stroke-width="1.5"/>
        <text x="140" y="55" fill="#3B82F6" font-family="JetBrains Mono" font-size="13" text-anchor="middle" font-weight="600">JPEG Image Data</text>
        <text x="140" y="75" fill="#8892A8" font-family="JetBrains Mono" font-size="10" text-anchor="middle">0x0000 — 0xB26D</text>
        <rect x="20" y="100" width="240" height="70" rx="8" fill="rgba(74,237,196,0.1)" stroke="#4AEDC4" stroke-width="1.5"/>
        <text x="140" y="135" fill="#4AEDC4" font-family="JetBrains Mono" font-size="13" text-anchor="middle" font-weight="600">ZIP Archive (hidden!)</text>
        <text x="140" y="155" fill="#8892A8" font-family="JetBrains Mono" font-size="10" text-anchor="middle">0xB26E — EOF</text>
        <!-- Glue indicator -->
        <text x="140" y="96" fill="#ff6b6b" font-family="JetBrains Mono" font-size="9" text-anchor="middle">← glued together →</text>
      </svg>
      <p style="text-align:center;font-size:0.85rem;color:var(--text2);margin-top:8px">A ZIP hidden at the end of a JPEG!</p>
    </div>
  </div>
</div>
</section>

<!-- ═══════════════════════════════════════ -->
<!-- SLIDE 12: TOOL — zsteg -->
<!-- ═══════════════════════════════════════ -->
<section class="slide" id="slide-12">
<div class="slide-inner">
  <h2 class="anim-hidden" data-anim="up">Tool: <span class="accent">zsteg</span> <span style="font-size:0.5em;color:var(--text2)">PNG-Specific LSB</span></h2>
  <p class="anim-hidden" data-anim="up" style="margin-bottom:24px">Automatically tries <strong class="highlight">many LSB bit/channel combinations</strong> on PNG files. The go-to tool for PNG steganography.</p>
  <div class="anim-hidden" data-anim="up" data-delay="0.2">
    <div class="terminal" id="term-zsteg">
      <div class="terminal-header"><span class="terminal-dot r"></span><span class="terminal-dot y"></span><span class="terminal-dot g"></span><span class="terminal-title">Terminal</span></div>
      <div class="terminal-body">
        <div class="terminal-line"><span class="prompt">$ </span><span class="cmd" data-type-text="zsteg secret.png"></span><span class="cursor" style="display:none">▌</span></div>
        <div class="terminal-line" style="opacity:0"><span class="output">imagedata           .. text: "nothing here"</span></div>
        <div class="terminal-line" style="opacity:0"><span class="flag">b1,rgb,lsb,xy       .. text: "Khana{png_lsb_master}"</span></div>
        <div class="terminal-line" style="opacity:0"><span class="output">b2,r,msb,xy         .. text: "garbled data..."</span></div>
        <div class="terminal-line" style="opacity:0"><span class="output">b1,rgba,lsb,xy      .. text: "\x00\x00\x00"</span></div>
      </div>
    </div>
  </div>
  <div class="pro-tip anim-hidden" data-anim="up" data-delay="0.4">
    <span class="pro-tip-icon" style="color:var(--accent);font-family:var(--font-mono);font-weight:700">&gt;</span>
    <div class="pro-tip-text"><strong>Pro tip:</strong> <code style="font-family:var(--font-mono);color:var(--accent)">zsteg</code> only works with PNG. For JPEG, use <code style="font-family:var(--font-mono);color:var(--accent)">steghide</code> or <code style="font-family:var(--font-mono);color:var(--accent)">jsteg</code>.</div>
  </div>
</div>
</section>

<!-- ═══════════════════════════════════════ -->
<!-- SLIDE 13: DEMO 2 — ADVANCED STEGO -->
<!-- ═══════════════════════════════════════ -->
<section class="slide" id="slide-13">
<div class="slide-inner" style="text-align:center">
  <div style="margin-bottom:24px">
    <span style="font-family:var(--font-mono);font-size:0.85rem;color:var(--accent);letter-spacing:2px;text-transform:uppercase" class="anim-hidden" data-anim="up">Live Demo</span>
  </div>
  <h1 class="anim-hidden" data-anim="scale" style="font-size:clamp(3rem,8vw,6rem);color:var(--accent);text-shadow:0 0 40px var(--accent-glow);margin-bottom:16px">DEMO</h1>
  <h2 class="anim-hidden" data-anim="up" data-delay="0.2" style="font-weight:400;color:var(--text2);margin-bottom:32px">Advanced Steganography</h2>
  <div class="anim-hidden" data-anim="up" data-delay="0.4" style="display:inline-flex;gap:16px;flex-wrap:wrap;justify-content:center">
    <span style="background:var(--bg2);border:1px solid var(--card-border);border-radius:6px;padding:8px 16px;font-family:var(--font-mono);font-size:0.9rem;color:var(--text)">binwalk</span>
    <span style="background:var(--bg2);border:1px solid var(--card-border);border-radius:6px;padding:8px 16px;font-family:var(--font-mono);font-size:0.9rem;color:var(--text)">zsteg</span>
  </div>
  <p class="anim-hidden" data-anim="up" data-delay="0.6" style="margin-top:24px;color:var(--text2);font-family:var(--font-mono);font-size:0.8rem">follow_dream.jpg &middot; linux_desktop.png</p>
</div>
</section>

<!-- ═══════════════════════════════════════ -->
<!-- SLIDE 14: AUDIO STEGANOGRAPHY -->
<!-- ═══════════════════════════════════════ -->
<section class="slide" id="slide-14">
<div class="slide-inner">
  <h2 class="anim-hidden" data-anim="up">Audio <span class="accent">Steganography</span></h2>
  <div class="split">
    <div class="split-left anim-hidden-left" data-anim="left">
      <p style="margin-bottom:16px">Messages can be hidden in the <strong class="highlight">frequency spectrum</strong> of audio files. You can't hear them — but you can <em>see</em> them in a spectrogram.</p>
      <h3 style="margin-top:20px;color:var(--accent);font-size:0.95rem">Tools to Use:</h3>
      <div style="display:flex;flex-direction:column;gap:8px;margin-top:12px">
        <div style="display:flex;align-items:center;gap:10px"><span class="accent">▸</span><span style="font-family:var(--font-mono);font-size:0.9rem">Audacity</span><span style="color:var(--text2);font-size:0.8rem">— Open source audio editor with spectrogram view</span></div>
        <div style="display:flex;align-items:center;gap:10px"><span class="accent">▸</span><span style="font-family:var(--font-mono);font-size:0.9rem">Sonic Visualizer</span><span style="color:var(--text2);font-size:0.8rem">— Specialized spectrogram analysis</span></div>
        <div style="display:flex;align-items:center;gap:10px"><span class="accent">▸</span><span style="font-family:var(--font-mono);font-size:0.9rem">morse-audio</span><span style="color:var(--text2);font-size:0.8rem">— Decodes morse code from audio</span></div>
      </div>
    </div>
    <div class="split-right anim-hidden-right" data-anim="right">
      <!-- Audio Spectrogram SVG -->
      <svg width="360" height="240" viewBox="0 0 360 240" fill="none" style="display:block;margin:0 auto">
        <rect width="360" height="240" rx="8" fill="#0A0E1A" stroke="var(--card-border)" stroke-width="1"/>
        <text x="18" y="20" fill="#8892A8" font-family="JetBrains Mono" font-size="9">Waveform View</text>
        <!-- Waveform -->
        <path class="spectro-wave" d="M20,60 Q40,30 60,60 Q80,90 100,60 Q120,30 140,60 Q160,90 180,60 Q200,30 220,60 Q240,90 260,60 Q280,30 300,60 Q320,90 340,60" stroke="#4AEDC4" stroke-width="1.5" fill="none"/>
        <line x1="20" y1="60" x2="340" y2="60" stroke="#8892A8" stroke-width="0.5" opacity="0.2"/>
        <!-- Divider -->
        <line x1="20" y1="100" x2="340" y2="100" stroke="#4AEDC4" stroke-width="0.5" opacity="0.3"/>
        <text x="180" y="96" fill="#4AEDC4" font-family="JetBrains Mono" font-size="8" text-anchor="middle" opacity="0.5">↓ Spectrogram View ↓</text>
        <!-- Spectrogram bands with hidden message -->
        <text x="18" y="120" fill="#8892A8" font-family="JetBrains Mono" font-size="9">22kHz</text>
        <rect x="50" y="110" width="290" height="15" rx="2" fill="rgba(59,130,246,0.05)"/>
        <rect x="50" y="127" width="290" height="15" rx="2" fill="rgba(59,130,246,0.08)"/>
        <text x="18" y="148" fill="#8892A8" font-family="JetBrains Mono" font-size="9">11kHz</text>
        <rect x="50" y="144" width="290" height="15" rx="2" fill="rgba(59,130,246,0.1)"/>
        <!-- Hidden message area -->
        <rect x="50" y="161" width="290" height="30" rx="2" fill="rgba(74,237,196,0.05)"/>
        <text x="18" y="180" fill="#8892A8" font-family="JetBrains Mono" font-size="9">5kHz</text>
        <!-- Hidden flag text in spectrogram -->
        <text class="spectro-flag" x="100" y="181" fill="#4AEDC4" font-family="Space Grotesk" font-size="16" font-weight="700" opacity="0">FLAG{AUDIO}</text>
        <rect x="50" y="193" width="290" height="15" rx="2" fill="rgba(139,92,246,0.08)"/>
        <rect x="50" y="210" width="290" height="15" rx="2" fill="rgba(139,92,246,0.15)"/>
        <text x="18" y="224" fill="#8892A8" font-family="JetBrains Mono" font-size="9">0Hz</text>
        <!-- Frequency axis -->
        <line x1="48" y1="110" x2="48" y2="225" stroke="#8892A8" stroke-width="0.5" opacity="0.3"/>
      </svg>
    </div>
  </div>
</div>
</section>

<!-- ═══════════════════════════════════════ -->
<!-- SLIDE 15: WHERE CAN SECRETS HIDE -->
<!-- ═══════════════════════════════════════ -->
<section class="slide" id="slide-15">
<div class="slide-inner" style="text-align:center">
  <h2 class="anim-hidden" data-anim="up">Where Can <span class="accent">Secrets</span> Hide?</h2>
  <p class="anim-hidden" data-anim="up" style="margin:0 auto 30px;text-align:center">Four main hiding spots forensic investigators check:</p>
  <div class="spots-grid anim-hidden" data-anim="up" data-delay="0.2">
    <div class="spot-card" data-spot="0">
      <div class="spot-icon"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#4AEDC4" stroke-width="2"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg></div>
      <div>
        <h4>Metadata Fields</h4>
        <p>EXIF comments, author fields, custom tags hidden in the file header</p>
        <div class="spot-tool">→ exiftool</div>
      </div>
    </div>
    <div class="spot-card" data-spot="1">
      <div class="spot-icon"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#4AEDC4" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><rect x="7" y="7" width="3" height="3" fill="#4AEDC4"/><rect x="14" y="7" width="3" height="3" fill="#4AEDC4" opacity="0.5"/><rect x="7" y="14" width="3" height="3" fill="#4AEDC4" opacity="0.3"/><rect x="14" y="14" width="3" height="3" fill="#4AEDC4" opacity="0.7"/></svg></div>
      <div>
        <h4>Pixel Data / LSB</h4>
        <p>Data encoded in the least significant bits of image color channels</p>
        <div class="spot-tool">→ steghide, zsteg</div>
      </div>
    </div>
    <div class="spot-card" data-spot="2">
      <div class="spot-icon"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#4AEDC4" stroke-width="2"><rect x="4" y="2" width="16" height="10" rx="2"/><rect x="4" y="12" width="16" height="10" rx="2" stroke-dasharray="4 2"/><line x1="12" y1="10" x2="12" y2="14" stroke-dasharray="2 2"/></svg></div>
      <div>
        <h4>Appended Data / EOF</h4>
        <p>Files concatenated after the end-of-file marker of the carrier</p>
        <div class="spot-tool">→ binwalk</div>
      </div>
    </div>
    <div class="spot-card" data-spot="3">
      <div class="spot-icon"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#4AEDC4" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg></div>
      <div>
        <h4>Plain Sight / Encoding</h4>
        <p>Base64 strings, readable text, invisible Unicode characters</p>
        <div class="spot-tool">→ strings, base64</div>
      </div>
    </div>
  </div>
</div>
</section>

<!-- ═══════════════════════════════════════ -->
<!-- SLIDE 16: CTF METHODOLOGY -->
<!-- ═══════════════════════════════════════ -->
<section class="slide" id="slide-16">
<div class="slide-inner">
  <h2 class="anim-hidden" data-anim="up">CTF Investigation <span class="accent">Methodology</span></h2>
  <p class="anim-hidden" data-anim="up" style="margin-bottom:20px">Follow this pipeline on <strong class="highlight">every stego challenge</strong>:</p>
  <!-- Pipeline -->
  <div class="pipeline anim-hidden" data-anim="up" data-delay="0.2" id="pipeline">
    <div class="pipeline-node" data-step="0">file</div><span class="pipeline-arrow" data-step="0">→</span>
    <div class="pipeline-node" data-step="1">exiftool</div><span class="pipeline-arrow" data-step="1">→</span>
    <div class="pipeline-node" data-step="2">strings</div><span class="pipeline-arrow" data-step="2">→</span>
    <div class="pipeline-node" data-step="3">xxd</div><span class="pipeline-arrow" data-step="3">→</span>
    <div class="pipeline-node" data-step="4">binwalk</div><span class="pipeline-arrow" data-step="4">→</span>
    <div class="pipeline-node" data-step="5">steghide</div><span class="pipeline-arrow" data-step="5">→</span>
    <div class="pipeline-node" data-step="6">zsteg</div><span class="pipeline-arrow" data-step="6">→</span>
    <div class="pipeline-node" data-step="7" style="border-color:var(--accent);color:var(--accent)">Khana{found!}</div>
  </div>
  <!-- Checklist -->
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px 24px;margin-top:24px;max-width:900px">
    <div class="anim-hidden" data-anim="up" data-delay="0.3" style="display:flex;align-items:center;gap:10px;font-size:0.9rem"><span class="accent" style="font-family:var(--font-mono);font-weight:700;width:20px">1.</span><span><code style="color:var(--accent);font-family:var(--font-mono)">file</code> — What is this file really?</span></div>
    <div class="anim-hidden" data-anim="up" data-delay="0.35" style="display:flex;align-items:center;gap:10px;font-size:0.9rem"><span class="accent" style="font-family:var(--font-mono);font-weight:700;width:20px">2.</span><span><code style="color:var(--accent);font-family:var(--font-mono)">exiftool</code> — Anything in metadata?</span></div>
    <div class="anim-hidden" data-anim="up" data-delay="0.4" style="display:flex;align-items:center;gap:10px;font-size:0.9rem"><span class="accent" style="font-family:var(--font-mono);font-weight:700;width:20px">3.</span><span><code style="color:var(--accent);font-family:var(--font-mono)">strings | grep flag</code> — Hidden text?</span></div>
    <div class="anim-hidden" data-anim="up" data-delay="0.45" style="display:flex;align-items:center;gap:10px;font-size:0.9rem"><span class="accent" style="font-family:var(--font-mono);font-weight:700;width:20px">4.</span><span><code style="color:var(--accent);font-family:var(--font-mono)">xxd | head</code> — Weird bytes?</span></div>
    <div class="anim-hidden" data-anim="up" data-delay="0.5" style="display:flex;align-items:center;gap:10px;font-size:0.9rem"><span class="accent" style="font-family:var(--font-mono);font-weight:700;width:20px">5.</span><span><code style="color:var(--accent);font-family:var(--font-mono)">binwalk</code> — Files inside files?</span></div>
    <div class="anim-hidden" data-anim="up" data-delay="0.55" style="display:flex;align-items:center;gap:10px;font-size:0.9rem"><span class="accent" style="font-family:var(--font-mono);font-weight:700;width:20px">6.</span><span><code style="color:var(--accent);font-family:var(--font-mono)">steghide</code> — LSB data? (empty pw)</span></div>
    <div class="anim-hidden" data-anim="up" data-delay="0.6" style="display:flex;align-items:center;gap:10px;font-size:0.9rem"><span class="accent" style="font-family:var(--font-mono);font-weight:700;width:20px">7.</span><span><code style="color:var(--accent);font-family:var(--font-mono)">zsteg</code> — (PNGs) LSB analysis</span></div>
    <div class="anim-hidden" data-anim="up" data-delay="0.65" style="display:flex;align-items:center;gap:10px;font-size:0.9rem"><span class="accent" style="font-family:var(--font-mono);font-weight:700;width:20px">8.</span><span>Spectrogram — (Audio) frequency check</span></div>
  </div>
  <div class="pro-tip anim-hidden" data-anim="up" data-delay="0.7" style="max-width:900px;margin-top:16px">
    <span class="pro-tip-icon" style="color:var(--accent);font-family:var(--font-mono);font-weight:700">&gt;</span>
    <div class="pro-tip-text"><strong>Pro tip:</strong> Follow this checklist on <strong>every challenge</strong>. Most CTF stego flags fall to one of these steps.</div>
  </div>
</div>
</section>

<!-- ═══════════════════════════════════════ -->
<!-- SLIDE 17: CTA -->
<!-- ═══════════════════════════════════════ -->
<section class="slide" id="slide-17">
<div class="slide-inner" style="text-align:center">
  <div class="anim-hidden-scale" data-anim="scale">
    <!-- Unlock SVG -->
    <svg width="120" height="120" viewBox="0 0 120 120" fill="none" style="margin-bottom:20px">
      <rect class="cta-lock-body" x="30" y="55" width="60" height="50" rx="8" stroke="#4AEDC4" stroke-width="2.5" fill="rgba(74,237,196,0.08)" stroke-dasharray="250" stroke-dashoffset="250"/>
      <path class="cta-lock-shackle" d="M42,55 V38 A18,18 0 0 1 78,38 V45" stroke="#4AEDC4" stroke-width="2.5" fill="none" stroke-dasharray="120" stroke-dashoffset="120"/>
      <circle class="cta-keyhole" cx="60" cy="76" r="5" fill="#4AEDC4" opacity="0"/>
      <rect class="cta-keyhole" x="58" y="76" width="4" height="12" rx="2" fill="#4AEDC4" opacity="0"/>
    </svg>
  </div>
  <h1 class="anim-hidden" data-anim="up" style="margin-bottom:12px">Ready to Find the <span class="accent">Hidden Flags</span>?</h1>
  <p class="anim-hidden" data-anim="up" style="font-size:1.1rem;margin:0 auto 30px;text-align:center">Put your new skills to the test. The flags are waiting.</p>
  <div class="anim-hidden" data-anim="up" data-delay="0.2" style="margin-bottom:30px">
    <a href="https://www.cyberkhana.tech/" target="_blank" class="cta-btn">Start the Challenge →</a>
  </div>
  <div class="tools-recap anim-hidden" data-anim="up" data-delay="0.3">
    <span>file</span><span>strings</span><span>exiftool</span><span>xxd</span><span>binwalk</span><span>steghide</span><span>zsteg</span><span>base64</span>
  </div>
  <p class="anim-hidden" data-anim="up" data-delay="0.4" style="font-family:var(--font-mono);font-size:0.8rem;color:var(--text2);margin-top:30px">// CyberKhana Digital Forensics Workshop</p>
</div>
</section>

<!-- Easter egg for curious students -->
<!-- Congratulations! You found the first flag: Khana{view_source_master} -->
<!-- There might be more hidden secrets in this page... can you find them? -->
<div style="display:none" aria-hidden="true" data-flag="Khana{inspect_element_pro}"></div>

<script>
gsap.registerPlugin(TextPlugin);

// ─── STATE ───
const TOTAL = 18;
let current = 0;
let transitioning = false;
let lsbStep = 0;
const LSB_STEPS = 7;
let extStep = 0;
const EXT_STEPS = 4;
const slides = document.querySelectorAll('.slide');
const animatedSlides = new Set();

// ─── PARTICLES ───
(function initParticles() {
  const c = document.getElementById('particles');
  const chars = '01001010 FF D8 FF 89504E47 Khana{ } A3F2 0x00 1101';
  for (let i = 0; i < 25; i++) {
    const p = document.createElement('div');
    p.className = 'bg-particle';
    p.textContent = chars.split(' ')[Math.floor(Math.random() * chars.split(' ').length)];
    p.style.left = Math.random() * 100 + '%';
    p.style.animationDuration = (15 + Math.random() * 25) + 's';
    p.style.animationDelay = -(Math.random() * 30) + 's';
    c.appendChild(p);
  }
})();

// ─── DOT NAV ───
const dotLabels = ['Hero','Steganography','File Anatomy','Extensions','file','strings','exiftool','xxd','Demo','LSB Method','steghide','binwalk','zsteg','Demo','Audio Stego','Hiding Spots','Methodology','Challenge'];
(function initDots() {
  const nav = document.getElementById('dotNav');
  for (let i = 0; i < TOTAL; i++) {
    const d = document.createElement('div');
    d.className = 'dot' + (i === 0 ? ' active' : '');
    d.dataset.index = i;
    d.innerHTML = '<span class="dot-label">' + dotLabels[i] + '</span>';
    d.addEventListener('click', () => goToSlide(i));
    nav.appendChild(d);
  }
})();

function updateDots() {
  document.querySelectorAll('.dot-nav .dot').forEach((d, i) => {
    d.classList.toggle('active', i === current);
  });
  document.getElementById('counterCurrent').textContent = current + 1;
  document.getElementById('progressBar').style.width = ((current / (TOTAL - 1)) * 100) + '%';
}

// ─── PIXEL GRID ───
(function initPixelGrid() {
  const grid = document.getElementById('pixelGrid');
  if (!grid) return;
  const colors = ['#2d4a3e','#1e3a4a','#3a2d4a','#4a3d2d','#2d3a4a','#3a4a2d','#4a2d3a','#2d4a4a'];
  for (let i = 0; i < 64; i++) {
    const cell = document.createElement('div');
    cell.className = 'pixel-cell';
    cell.style.background = colors[Math.floor(Math.random() * colors.length)];
    // Specific cell for zoom demo
    if (i === 19) { cell.style.background = 'rgb(210,180,76)'; cell.id = 'targetPixel'; }
    grid.appendChild(cell);
  }
})();

// ─── NAVIGATION ───
function goToSlide(n) {
  if (transitioning || n < 0 || n >= TOTAL) return;
  if (n === current) return;

  transitioning = true;
  const dir = n > current ? 1 : -1;
  const outSlide = slides[current];
  const inSlide = slides[n];

  // Reset sub-steps when leaving slides
  if (current === 9) lsbStep = 0;
  if (current === 3) extStep = 0;

  // Kill all GSAP tweens on the outgoing slide to avoid conflicts
  const outChildren = outSlide.querySelectorAll('*');
  for (let i = 0; i < outChildren.length; i++) gsap.killTweensOf(outChildren[i]);

  // Phase 1: fade out current slide
  gsap.to(outSlide, {
    opacity: 0, x: -60 * dir, duration: 0.35, ease: 'power2.in',
    onComplete: () => {
      outSlide.classList.remove('active');
      resetSlideAnimations(outSlide);
      gsap.set(outSlide, { x: 0 });

      // Phase 2: fade in new slide
      inSlide.classList.add('active');
      gsap.fromTo(inSlide,
        { opacity: 0, x: 60 * dir },
        { opacity: 1, x: 0, duration: 0.4, ease: 'power2.out',
          onComplete: () => {
            current = n;
            transitioning = false;
            updateDots();
            triggerSlideAnimation(n);
          }
        }
      );
    }
  });
}

function nextSlide() {
  // Handle Extension sub-steps
  if (current === 3 && extStep < EXT_STEPS - 1) {
    extStep++;
    showExtStep(extStep);
    return;
  }
  // Handle LSB sub-steps
  if (current === 9 && lsbStep < LSB_STEPS - 1) {
    lsbStep++;
    showLsbStep(lsbStep);
    return;
  }
  goToSlide(current + 1);
}

function prevSlide() {
  // Handle Extension sub-steps backwards
  if (current === 3 && extStep > 0) {
    extStep--;
    showExtStep(extStep);
    return;
  }
  // Handle LSB sub-steps backwards
  if (current === 9 && lsbStep > 0) {
    lsbStep--;
    showLsbStep(lsbStep);
    return;
  }
  goToSlide(current - 1);
}

function showLsbStep(step) {
  document.querySelectorAll('.lsb-content').forEach((el, i) => {
    if (i === step) {
      el.classList.add('active');
      gsap.fromTo(el, { opacity: 0, y: 20 }, { opacity: 1, y: 0, duration: 0.4, ease: 'power2.out' });
    } else {
      el.classList.remove('active');
    }
  });
}

function showExtStep(step) {
  document.querySelectorAll('.ext-content').forEach((el, i) => {
    if (i === step) {
      el.classList.add('active');
      gsap.fromTo(el, { opacity: 0, y: 20 }, { opacity: 1, y: 0, duration: 0.4, ease: 'power2.out' });
      // Step 1: trigger the extension shatter animation
      if (step === 1) {
        const extLabel = el.querySelector('.ext-label');
        const trueType = el.querySelector('.true-type');
        if (extLabel && trueType) {
          gsap.to(extLabel, { opacity: 0, scale: 1.5, rotation: 15, duration: 0.6, delay: 0.8, ease: 'power2.in' });
          gsap.to(trueType, { opacity: 1, duration: 0.4, delay: 1.3, ease: 'power2.out' });
        }
      }
      // Step 2: animate signature bytes
      if (step === 2) {
        el.querySelectorAll('.sig-byte').forEach((b, j) => {
          gsap.fromTo(b, { opacity: 0 }, { opacity: 1, duration: 0.3, delay: 0.4 + j * 0.25 });
        });
        gsap.to(el.querySelector('.sig-result'), { opacity: 1, duration: 0.4, delay: 1.6 });
      }
    } else {
      el.classList.remove('active');
    }
  });
}

// Keyboard
document.addEventListener('keydown', (e) => {
  if (transitioning) return;
  switch (e.key) {
    case 'ArrowRight': case 'ArrowDown': case ' ': case 'PageDown':
      e.preventDefault(); nextSlide(); break;
    case 'ArrowLeft': case 'ArrowUp': case 'PageUp':
      e.preventDefault(); prevSlide(); break;
    case 'Home': e.preventDefault(); goToSlide(0); break;
    case 'End': e.preventDefault(); goToSlide(TOTAL - 1); break;
  }
});

// Touch/swipe
let touchStartX = 0, touchStartY = 0;
document.addEventListener('touchstart', (e) => { touchStartX = e.touches[0].clientX; touchStartY = e.touches[0].clientY; });
document.addEventListener('touchend', (e) => {
  const dx = e.changedTouches[0].clientX - touchStartX;
  const dy = e.changedTouches[0].clientY - touchStartY;
  if (Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > 50) {
    if (dx < 0) nextSlide(); else prevSlide();
  }
});

// ─── ANIMATION SYSTEM ───
function typeTerminalLines(terminalEl, callback) {
  const lines = terminalEl.querySelectorAll('.terminal-line');
  const tl = gsap.timeline({ onComplete: callback });
  let isFirstCmd = true;

  lines.forEach((line) => {
    const cmdEl = line.querySelector('.cmd');
    const cursorEl = line.querySelector('.cursor');
    const isCmd = cmdEl && cmdEl.dataset.typeText;

    if (isCmd) {
      const text = cmdEl.dataset.typeText;
      if (!isFirstCmd) tl.add(() => {}, '+=0.3');
      if (cursorEl) tl.set(cursorEl, { display: 'inline-block' });
      tl.to(cmdEl, { duration: text.length * 0.03, text: { value: text, delimiter: '' }, ease: 'none' });
      if (cursorEl) tl.set(cursorEl, { display: 'none' }, '+=0.2');
      isFirstCmd = false;
    } else if (line.style.opacity === '0') {
      tl.to(line, { opacity: 1, duration: 0.15 }, '+=0.05');
    }
  });

  return tl;
}

function animateGenericElements(slideEl) {
  const elements = slideEl.querySelectorAll('[data-anim]');
  elements.forEach((el) => {
    const type = el.dataset.anim;
    const delay = parseFloat(el.dataset.delay) || 0;
    const from = {};
    if (type === 'up') { from.opacity = 0; from.y = 30; }
    else if (type === 'left') { from.opacity = 0; from.x = -40; }
    else if (type === 'right') { from.opacity = 0; from.x = 40; }
    else if (type === 'scale') { from.opacity = 0; from.scale = 0.8; }
    gsap.fromTo(el, from, { opacity: 1, y: 0, x: 0, scale: 1, duration: 0.6, delay: delay, ease: 'power2.out' });
  });
}

function resetSlideAnimations(slideEl) {
  // Reset generic animated elements
  slideEl.querySelectorAll('[data-anim]').forEach(el => {
    const type = el.dataset.anim;
    if (type === 'up') gsap.set(el, { opacity: 0, y: 30 });
    else if (type === 'left') gsap.set(el, { opacity: 0, x: -40 });
    else if (type === 'right') gsap.set(el, { opacity: 0, x: 40 });
    else if (type === 'scale') gsap.set(el, { opacity: 0, scale: 0.8 });
  });
  // Reset terminal content
  slideEl.querySelectorAll('.terminal-line .cmd').forEach(el => { el.textContent = ''; });
  slideEl.querySelectorAll('.terminal-line .cursor').forEach(el => { el.style.display = 'none'; });
  slideEl.querySelectorAll('.terminal-line').forEach(el => {
    if (!el.querySelector('.cmd') && !el.querySelector('.prompt')) el.style.opacity = '0';
    else if (el.querySelector('.output') || el.querySelector('.flag')) {
      if (!el.querySelector('.cmd')) el.style.opacity = '0';
    }
  });
  // Reset SVG stroke-dashoffset paths
  slideEl.querySelectorAll('[stroke-dasharray]').forEach(el => {
    const dashLen = el.getAttribute('stroke-dasharray');
    if (dashLen) el.setAttribute('stroke-dashoffset', dashLen);
  });
  // Reset SVG elements that had opacity animated
  slideEl.querySelectorAll('.hero-keyhole, .hero-ray, .hero-binary, .hero-eye-fill').forEach(el => { gsap.set(el, { opacity: 0 }); });
  slideEl.querySelectorAll('.hero-glow').forEach(el => { gsap.set(el, { opacity: 0 }); el.setAttribute('stroke-dashoffset', '600'); });
  slideEl.querySelectorAll('.hero-pupil').forEach(el => { el.setAttribute('stroke-dashoffset', '120'); });
  slideEl.querySelectorAll('.file-outline').forEach(el => { el.setAttribute('stroke-dashoffset', el.getAttribute('stroke-dasharray')); });
  slideEl.querySelectorAll('.band').forEach(el => { gsap.set(el, { opacity: 0, x: -20 }); });
  slideEl.querySelectorAll('.hex-byte, .meta-row').forEach(el => { gsap.set(el, { opacity: 0 }); });
  // Reset extension sub-steps
  slideEl.querySelectorAll('.ext-content').forEach((el, i) => {
    if (i === 0) el.classList.add('active');
    else el.classList.remove('active');
  });
  slideEl.querySelectorAll('.ext-label').forEach(el => { gsap.set(el, { opacity: 1, scale: 1, rotation: 0 }); });
  slideEl.querySelectorAll('.true-type').forEach(el => { gsap.set(el, { opacity: 0 }); });
  slideEl.querySelectorAll('.sig-byte').forEach(el => { gsap.set(el, { opacity: 0 }); });
  slideEl.querySelectorAll('.sig-result').forEach(el => { gsap.set(el, { opacity: 0 }); });
  // Reset pipeline
  slideEl.querySelectorAll('.pipeline-node.lit').forEach(el => { el.classList.remove('lit'); });
  slideEl.querySelectorAll('.pipeline-arrow.lit').forEach(el => { el.classList.remove('lit'); });
  // Reset spectrogram
  slideEl.querySelectorAll('.spectro-wave').forEach(el => { el.setAttribute('stroke-dashoffset', '1000'); });
  slideEl.querySelectorAll('.spectro-flag').forEach(el => { gsap.set(el, { opacity: 0 }); });
  // Reset CTA lock
  slideEl.querySelectorAll('.cta-lock-body, .cta-lock-shackle').forEach(el => {
    const d = el.getAttribute('stroke-dasharray');
    if (d) el.setAttribute('stroke-dashoffset', d);
    gsap.set(el, { rotation: 0 });
  });
  slideEl.querySelectorAll('.cta-keyhole').forEach(el => { gsap.set(el, { opacity: 0 }); });
  // Reset hero title
  const heroTitle = slideEl.querySelector('#heroTitle');
  if (heroTitle) heroTitle.textContent = '';
}

// Slide-specific animations
const slideAnimations = {
  0: function(slide) {
    // Hero: dramatic eye-forming animation
    animateGenericElements(slide);
    const tl = gsap.timeline();
    // Phase 1: Eye shape draws in (0-1.2s)
    tl.to(slide.querySelector('.hero-eye-path'), { strokeDashoffset: 0, duration: 1.2, ease: 'power2.inOut' })
      .to(slide.querySelector('.hero-eye-fill'), { opacity: 1, duration: 0.4 }, '-=0.3')
    // Phase 2: Iris draws (0.8-1.6s)
      .to(slide.querySelector('.hero-iris'), { strokeDashoffset: 0, duration: 0.8, ease: 'power2.inOut' }, 0.8)
    // Phase 3: Pupil draws (1.2-1.8s)
      .to(slide.querySelector('.hero-pupil'), { strokeDashoffset: 0, duration: 0.6, ease: 'power2.inOut' }, 1.2)
    // Phase 4: Lock forms inside pupil (1.6-2.2s)
      .to(slide.querySelectorAll('.hero-lock'), { strokeDashoffset: 0, duration: 0.6, ease: 'power2.inOut', stagger: 0.15 }, 1.6)
    // Phase 5: Keyhole appears (2.2s)
      .to(slide.querySelectorAll('.hero-keyhole'), { opacity: 1, duration: 0.3 }, 2.2)
    // Phase 6: Outer glow ring (2.3s)
      .to(slide.querySelector('.hero-glow'), { strokeDashoffset: 0, opacity: 0.15, duration: 1.2, ease: 'power1.inOut' }, 2.3)
    // Phase 7: Rays burst outward (2.5s)
      .to(slide.querySelectorAll('.hero-ray'), { opacity: 0.4, duration: 0.4, stagger: 0.06 }, 2.5)
    // Phase 8: Binary appears (2.8s)
      .to(slide.querySelectorAll('.hero-binary'), { opacity: 0.12, duration: 0.6, stagger: 0.15 }, 2.8);
    // Title types in parallel
    const title = document.getElementById('heroTitle');
    gsap.to(title, { duration: 1.2, text: { value: 'Steganography', delimiter: '' }, ease: 'none', delay: 0.3 });
  },
  2: function(slide) {
    // File anatomy: draw outline, reveal bands
    animateGenericElements(slide);
    const outlines = slide.querySelectorAll('.file-outline');
    outlines.forEach(p => { gsap.to(p, { strokeDashoffset: 0, duration: 1.5, ease: 'power2.inOut' }); });
    const bands = slide.querySelectorAll('.band');
    bands.forEach((b, i) => {
      gsap.to(b, { opacity: 1, x: 0, duration: 0.6, delay: 0.8 + i * 0.4, ease: 'power2.out' });
    });
    // Hex bytes
    slide.querySelectorAll('.hex-byte').forEach((h, i) => {
      gsap.to(h, { opacity: 1, duration: 0.3, delay: 1.2 + i * 0.15 });
    });
    // Meta rows
    slide.querySelectorAll('.meta-row').forEach((r, i) => {
      gsap.to(r, { opacity: 1, duration: 0.3, delay: 2 + i * 0.2 });
    });
    // Comment glow
    gsap.to(slide.querySelector('.comment-glow'), { attr: { fill: 'rgba(74,237,196,0.15)' }, duration: 0.8, delay: 2.8, yoyo: true, repeat: -1 });
  },
  3: function(slide) {
    // Extension vs Signature: sub-steps
    extStep = 0;
    showExtStep(0);
    animateGenericElements(slide);
  },
  9: function(slide) {
    // LSB: show first step
    lsbStep = 0;
    showLsbStep(0);
    animateGenericElements(slide);
    // Animate target pixel highlight
    const tp = document.getElementById('targetPixel');
    if (tp) gsap.to(tp, { boxShadow: '0 0 12px rgba(74,237,196,0.5)', duration: 1, yoyo: true, repeat: -1 });
    // Set zoomed pixel color
    const zp = document.getElementById('zoomedPixel');
    if (zp) zp.style.background = 'rgb(210,180,76)';
  },
  14: function(slide) {
    // Audio: draw waveform, reveal flag
    animateGenericElements(slide);
    gsap.to(slide.querySelector('.spectro-wave'), { strokeDashoffset: 0, duration: 2, delay: 0.5, ease: 'power2.inOut' });
    gsap.to(slide.querySelector('.spectro-flag'), { opacity: 0.7, duration: 1, delay: 2.5, ease: 'power2.out' });
  },
  16: function(slide) {
    // Pipeline: light up nodes sequentially
    animateGenericElements(slide);
    const nodes = slide.querySelectorAll('.pipeline-node');
    const arrows = slide.querySelectorAll('.pipeline-arrow');
    nodes.forEach((n, i) => {
      gsap.to(n, { className: '+=lit', duration: 0.01, delay: 1.5 + i * 0.3 });
    });
    arrows.forEach((a, i) => {
      gsap.to(a, { className: '+=lit', duration: 0.01, delay: 1.65 + i * 0.3 });
    });
  },
  17: function(slide) {
    // CTA: draw lock, then unlock
    animateGenericElements(slide);
    const body = slide.querySelector('.cta-lock-body');
    const shackle = slide.querySelector('.cta-lock-shackle');
    const keyholes = slide.querySelectorAll('.cta-keyhole');
    if (body) gsap.to(body, { strokeDashoffset: 0, duration: 1, delay: 0.3, ease: 'power2.inOut' });
    if (shackle) gsap.to(shackle, { strokeDashoffset: 0, duration: 0.8, delay: 0.8, ease: 'power2.inOut' });
    keyholes.forEach(k => gsap.to(k, { opacity: 1, duration: 0.4, delay: 1.5 }));
    // Unlock animation: rotate shackle
    if (shackle) gsap.to(shackle, { rotation: -20, transformOrigin: 'right bottom', duration: 0.5, delay: 2.2, ease: 'back.out' });
  }
};

function triggerSlideAnimation(n) {
  const slide = slides[n];
  if (slideAnimations[n]) {
    slideAnimations[n](slide);
  } else {
    animateGenericElements(slide);
  }
  // Type terminals
  slide.querySelectorAll('.terminal').forEach(t => typeTerminalLines(t));
}

// ─── INIT ───
(function init() {
  // Set all non-active slides invisible
  slides.forEach((s, i) => {
    if (i !== 0) gsap.set(s, { opacity: 0, x: 80 });
  });

  // Set initial hidden state for ALL animated elements across ALL slides
  document.querySelectorAll('[data-anim]').forEach(el => {
    const type = el.dataset.anim;
    if (type === 'up') gsap.set(el, { opacity: 0, y: 30 });
    else if (type === 'left') gsap.set(el, { opacity: 0, x: -40 });
    else if (type === 'right') gsap.set(el, { opacity: 0, x: 40 });
    else if (type === 'scale') gsap.set(el, { opacity: 0, scale: 0.8 });
  });

  // Set initial hidden state for SVG elements
  document.querySelectorAll('.band').forEach(el => gsap.set(el, { opacity: 0, x: -20 }));
  document.querySelectorAll('.hex-byte, .meta-row').forEach(el => gsap.set(el, { opacity: 0 }));

  // Trigger first slide animation
  setTimeout(() => triggerSlideAnimation(0), 300);
  updateDots();
})();
</script>
</body>
</html>
